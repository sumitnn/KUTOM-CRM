import{r as o,a as N,c4 as j,c5 as y,j as e,y as n}from"./index-oHO_bMXB.js";const v=({role:h})=>{const[l,p]=o.useState(""),[i,b]=o.useState(""),[a,c]=o.useState(""),[d,m]=o.useState(!1),u=N(),{data:s}=j(),[f]=y(),g=async t=>{var x;if(t.preventDefault(),!l||!a){n.error("Amount and Payment Method are required");return}if(a==="upi"&&!(s!=null&&s.upi_id)){n.error("Please add your UPI ID in profile settings first");return}if(a==="bank"&&!(s!=null&&s.account_number)){n.error("Please add your bank details in profile settings first");return}m(!0);try{const r={amount:parseFloat(l),payment_method:a,note:i,payment_details:a==="upi"?{upi_id:s.upi_id,bank_upi:s.bank_upi}:{account_holder_name:s.account_holder_name,account_number:s.account_number,ifsc_code:s.ifsc_code,bank_name:s.bank_name}};await f(r).unwrap(),n.success("Withdrawal request submitted successfully"),u(`/${h}/my-withdrawl-history`)}catch(r){n.error(((x=r==null?void 0:r.data)==null?void 0:x.message)||"Failed to submit request")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-4 sm:py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Create Withdrawal Request"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Request to withdraw money from your wallet"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700",children:["Amount (₹) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),e.jsx("input",{type:"number",id:"amount",name:"amount",min:"1",className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md py-2 border",placeholder:"0.00",value:l,onChange:t=>p(t.target.value),required:!0})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Payment Method To Receive Money ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-md cursor-pointer hover:border-blue-400 transition-colors",children:[e.jsx("input",{type:"radio",name:"paymentMethod",className:"h-4 w-4 text-blue-600 focus:ring-blue-500",checked:a==="upi",onChange:()=>c("upi"),required:!0}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"UPI Payment"}),e.jsx("span",{className:"block text-xs mt-1",children:s!=null&&s.upi_id?e.jsxs("span",{className:"text-gray-500",children:["Your UPI ID: ",s.upi_id]}):e.jsx("span",{className:"text-red-500",children:"No UPI ID found. Please add in profile settings."})})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-md cursor-pointer hover:border-blue-400 transition-colors",children:[e.jsx("input",{type:"radio",name:"paymentMethod",className:"h-4 w-4 text-blue-600 focus:ring-blue-500",checked:a==="bank",onChange:()=>c("bank")}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"Bank Transfer"}),e.jsx("span",{className:"block text-xs mt-1",children:s!=null&&s.account_number?e.jsxs("span",{className:"text-gray-500",children:["Account ending with: ••••",s.account_number.slice(-4)]}):e.jsx("span",{className:"text-red-500",children:"No bank details found. Please add in profile settings."})})]})]})})]})]}),a&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Payment Details To Receive Money"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-md",children:a==="upi"?s!=null&&s.upi_id?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"UPI ID:"})," ",s.upi_id]}),e.jsx("p",{className:"text-sm text-gray-700",children:"Money will be transferred to this UPI ID upon approval."})]}):e.jsx("p",{className:"text-sm text-red-500",children:"No UPI ID found. Please add your UPI ID in profile settings."}):a==="bank"?s!=null&&s.account_number?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Account Holder:"})," ",s.account_holder_name]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Account Number:"})," ••••••••••",s.account_number.slice(-4)]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Bank Name:"})," ",s.bank_name]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"IFSC Code:"})," ",s.ifsc_code]}),e.jsx("p",{className:"text-sm text-gray-700",children:"Money will be transferred to this bank account upon approval."})]}):e.jsx("p",{className:"text-sm text-red-500",children:"No bank details found. Please add your bank details in profile settings."}):null})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"note",className:"block text-sm font-medium text-gray-700",children:"Additional Notes (Optional)"}),e.jsx("textarea",{id:"note",name:"note",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Any additional information about your withdrawal request...",value:i,onChange:t=>b(t.target.value)})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-between gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>u(-1),className:"px-4 py-2 border border-gray-300 cursor-pointer text-gray-700 bg-white rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d||!l||!a||a==="upi"&&!(s!=null&&s.upi_id)||a==="bank"&&!(s!=null&&s.account_number),className:"px-4 py-2 border cursor-pointer border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Submit Request"})]})]})]})})})};export{v as default};
