import{cz as _,r as T,j as e}from"./index-0HRytCPr.js";import{D,a as F,b as I,T as l,F as m,I as x,S as h,M as i,P,V as S,L as W,A as k,c as j,d as p,e as w,f as L,g as E}from"./AdapterDateFns-BWhNPv2A.js";import{T as v,A as M,G as n,B as g}from"./AnnouncementsPage-BdS98kWm.js";import"./index-D-omREhy.js";import"./addDays-RjdodTT7.js";import"./en-US-CEmq6YZe.js";import"./endOfMonth-12zbFdle.js";import"./format-PgvnqH7J.js";import"./index-CnyDuYXe.js";const U=({open:b,onClose:o})=>{const[y,{isLoading:d,error:c}]=_(),[r,u]=T.useState({title:"",content:"",priority:"medium",visible_to:"all",start_time:null,end_time:null,is_active:!0}),C=async t=>{t.preventDefault();try{await y(r).unwrap(),o(),u({title:"",content:"",priority:"medium",visible_to:"all",start_time:null,end_time:null,is_active:!0})}catch(s){console.error("Failed to create announcement:",s)}},a=t=>s=>{const A=s.target?s.target.value:s;u(f=>({...f,[t]:A}))};return e.jsxs(D,{open:b,onClose:o,maxWidth:"md",fullWidth:!0,Paper:{sx:{borderRadius:3}},children:[e.jsxs(F,{children:[e.jsx(v,{variant:"h5",component:"div",fontWeight:"bold",children:"Create New Announcement"}),e.jsx(v,{variant:"body2",color:"text.secondary",children:"Broadcast an important message to users"})]}),e.jsxs("form",{onSubmit:C,children:[e.jsxs(I,{children:[c&&e.jsxs(M,{severity:"error",sx:{mb:2},children:["Failed to create announcement: ",c.message]}),e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(l,{fullWidth:!0,label:"Title",value:r.title,onChange:a("title"),required:!0,placeholder:"Enter announcement title",variant:"outlined"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(l,{fullWidth:!0,label:"Content",value:r.content,onChange:a("content"),required:!0,multiline:!0,rows:4,placeholder:"Enter announcement content",variant:"outlined"})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(m,{fullWidth:!0,variant:"outlined",children:[e.jsx(x,{children:"Priority"}),e.jsxs(h,{value:r.priority,onChange:a("priority"),label:"Priority",startAdornment:e.jsx(P,{sx:{mr:1,color:"text.secondary"}}),children:[e.jsx(i,{value:"low",children:"Low"}),e.jsx(i,{value:"medium",children:"Medium"}),e.jsx(i,{value:"high",children:"High"}),e.jsx(i,{value:"critical",children:"Critical"})]})]})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(m,{fullWidth:!0,variant:"outlined",children:[e.jsx(x,{children:"Visible To"}),e.jsxs(h,{value:r.visible_to,onChange:a("visible_to"),label:"Visible To",startAdornment:e.jsx(S,{sx:{mr:1,color:"text.secondary"}}),children:[e.jsx(i,{value:"all",children:"All Users"}),e.jsx(i,{value:"vendor",children:"Vendors"}),e.jsx(i,{value:"reseller",children:"Resellers"}),e.jsx(i,{value:"stockist",children:"Stockists"})]})]})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(W,{dateAdapter:k,children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(j,{label:"Start Time (Optional)",value:r.start_time,onChange:a("start_time"),renderInput:t=>e.jsx(l,{...t,fullWidth:!0,Input:{...t.InputProps,startAdornment:e.jsx(p,{sx:{mr:1,color:"text.secondary"}})}})})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(j,{label:"End Time (Optional)",value:r.end_time,onChange:a("end_time"),renderInput:t=>e.jsx(l,{...t,fullWidth:!0,Input:{...t.InputProps,startAdornment:e.jsx(p,{sx:{mr:1,color:"text.secondary"}})}})})})]})})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(w,{control:e.jsx(L,{checked:r.is_active,onChange:t=>a("is_active")(t.target.checked),color:"primary"}),label:"Active Announcement"})})]})]}),e.jsxs(E,{sx:{p:3,gap:1},children:[e.jsx(g,{onClick:o,variant:"outlined",disabled:d,children:"Cancel"}),e.jsx(g,{type:"submit",variant:"contained",disabled:d||!r.title||!r.content,sx:{background:"linear-gradient(45deg, #2196F3, #21CBF3)",borderRadius:2,px:4},children:d?"Creating...":"Create Announcement"})]})]})]})};export{U as default};
