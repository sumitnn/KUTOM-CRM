import{a as M,u as B,Z as G,r as j,a1 as K,bH as Q,j as e,y as S,bJ as U}from"./index-0HRytCPr.js";import{C as I,X as W,e as q,O as z}from"./index--WZidvUd.js";/* empty css                      */const L=t=>{var i,u;if((i=t.product_detail)!=null&&i.images&&t.product_detail.images.length>0){const c=t.product_detail.images.find(r=>r.is_featured);return(c==null?void 0:c.image)||((u=t.product_detail.images[0])==null?void 0:u.image)||null}return null},y={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800",out_of_stock:"bg-red-100 text-red-800",draft:"bg-purple-100 text-purple-800",published:"bg-orange-100 text-orange-800"},X=({role:t})=>{const i=M(),u=B(),c=G(s=>s.cart.items),[r,N]=j.useState(""),[b,w]=j.useState(""),[_,p]=j.useState("");j.useEffect(()=>{const s=setTimeout(()=>{p(r)},900);return()=>{clearTimeout(s)}},[r]);const{data:E=[],isLoading:f,error:T}=K(),{data:A=[],isLoading:P,isError:F,refetch:$}=Q({search:_||void 0,category:b||void 0}),h=A.map(s=>({...s,...s.product_detail,product_detail:s.product_detail,variants_detail:s.variants_detail,user_name:s.user_name,role:s.role,is_featured:s.is_featured})),R=()=>{N(""),w("")},D=s=>{var o,x,m;const a=((o=s.variants_detail)==null?void 0:o.find(n=>n.is_default))||((x=s.variants_detail)==null?void 0:x[0]),l=(m=a==null?void 0:a.bulk_prices)==null?void 0:m[0],d=(l==null?void 0:l.final_price)||0;c.some(n=>n.id===s.id)?S.info("Item already in cart."):(u(U({id:s.id,name:s.name,price:Number(d),quantity:1,image:L(s)||"/placeholder.png",variantId:a==null?void 0:a.id})),S.success("Item added to cart successfully!"))},v=f||P;return e.jsxs("div",{className:"py-4 max-w-8xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-extrabold text-gray-800",children:"Product Inventory"}),e.jsx("p",{className:"text-sm text-gray-500 font-bold",children:"see all available products  "})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx("input",{type:"text",placeholder:"Search products...",className:"input input-bordered w-full pl-10 focus:ring-2 focus:ring-primary",value:r,onChange:s=>N(s.target.value),onKeyUp:s=>s.key==="Enter"&&p(r)}),e.jsx(I,{className:"absolute left-3 top-3.5 text-gray-400"})]}),e.jsxs("select",{className:"select select-bordered w-full sm:w-40 focus:ring-2 focus:ring-primary",value:b,onChange:s=>w(s.target.value),disabled:f,children:[e.jsx("option",{value:"",children:"All Categories"}),f?e.jsx("option",{disabled:!0,children:"Loading categories..."}):T?e.jsx("option",{disabled:!0,children:"Error loading categories"}):E.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"btn btn-primary gap-2",onClick:()=>p(r),disabled:v,children:[e.jsx(I,{})," Search"]}),(_||b)&&e.jsx("button",{className:"btn btn-outline",onClick:R,disabled:v,children:"Reset"})]}),t==="vendor"&&e.jsx("div",{className:"flex gap-2 ml-auto",children:e.jsxs("button",{className:"btn btn-primary gap-2",onClick:()=>i(`/${t}/create-product`),children:[e.jsx(W,{})," Create"]})})]})]}),v?e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsx("span",{className:"loading loading-spinner text-primary loading-lg"})}):F?e.jsx("div",{className:"alert alert-error shadow-lg",children:e.jsxs("div",{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{children:["Failed to load products. ",e.jsx("button",{className:"btn btn-sm btn-outline ml-2",onClick:$,children:"Retry"})]})]})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12",children:"#"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Sub-Category"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Vendor"}),e.jsx("th",{className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:h.length>0?h.map((s,a)=>{var x,m,n,k;const l=((x=s.variants_detail)==null?void 0:x.find(g=>g.is_default))||((m=s.variants_detail)==null?void 0:m[0]),d=(n=l==null?void 0:l.product_variant_prices)==null?void 0:n[0],C=(d==null?void 0:d.actual_price)||0,o=L(s);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{children:a+1}),e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"w-10 h-10 rounded-full",children:o?e.jsx("img",{src:o,alt:s.name,onError:g=>{g.target.onerror=null,g.target.src="/placeholder.png"}}):e.jsx("div",{className:"bg-gray-100 w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-400",children:"No Image"})})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["SKU: ",e.jsx("strong",{children:s.sku})]}),s.is_featured&&e.jsx("span",{className:"badge badge-primary badge-xs mt-1",children:"Featured"})]})]})}),e.jsx("td",{children:s.category_name||"-"}),e.jsx("td",{children:s.subcategory_name||"-"}),e.jsxs("td",{children:["₹",C]}),e.jsxs("td",{className:"space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y[((k=s.status)==null?void 0:k.toLowerCase())||"draft"]}`,children:s.status||"draft"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.is_featured?y.active:y.inactive}`,children:s.is_featured?"Active":"Inactive"})]}),e.jsx("td",{children:s.user_name||"-"}),e.jsx("td",{children:e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("button",{className:"btn btn-ghost btn-sm hover:bg-gray-200 p-2",onClick:()=>i(`/${t}/products/${s.id}`),title:"View",children:e.jsx(q,{className:"text-gray-600 text-lg"})}),(t==="admin"||t==="vendor")&&e.jsx("button",{className:"btn btn-ghost btn-sm hover:bg-blue-50 p-2",onClick:()=>i(`/${t}/products/edit/${s.id}`),title:"Edit",children:e.jsx(z,{className:"text-blue-600 text-lg"})}),t==="reseller"&&e.jsx("button",{className:"btn btn-xs btn-primary",onClick:()=>D(s),children:"Add to Cart"})]})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-700",children:"No products found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})})})})]})}),h.length>0&&e.jsxs("div",{className:"flex justify-between items-center p-4 border-t border-gray-100",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.jsx("span",{className:"font-medium",children:"1"})," to ",e.jsx("span",{className:"font-medium",children:h.length})," results"]}),e.jsxs("div",{className:"join",children:[e.jsx("button",{className:"join-item btn btn-sm",disabled:!0,children:"«"}),e.jsx("button",{className:"join-item btn btn-sm btn-active",children:"1"}),e.jsx("button",{className:"join-item btn btn-sm",disabled:!0,children:"»"})]})]})]})]})};export{X as default};
