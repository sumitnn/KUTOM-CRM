import{a1 as w,bC as v,bD as E,r as l,j as e,y as n}from"./index-oHO_bMXB.js";const D=()=>{const{data:s,isLoading:m,isError:x}=w(),g=Array.isArray(s)?s:(s==null?void 0:s.results)??[],[h]=v(),[f]=E(),[o,b]=l.useState(""),[y,c]=l.useState(null),[r,i]=l.useState(""),a=l.useRef(null),d=g.filter(t=>t.name.toLowerCase().includes(o.toLowerCase())),p=t=>{c(t),i(t.name),a.current&&a.current.showModal()},u=()=>{a.current&&a.current.close(),c(null),i("")},j=async t=>{if(confirm("Are you sure you want to delete this category?"))try{await h(t).unwrap(),n.success("Delete Successfully")}catch(C){n.error(C)}},N=async()=>{if(r.trim())try{await f({id:y.id,name:r}).unwrap(),u(),n.success("Update Category Successfully")}catch(t){n.error(t)}};return m?e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsx("span",{className:"loading loading-spinner text-error loading-lg"})}):x?e.jsx("div",{children:"Error loading categories"}):e.jsxs("div",{className:"py-4 max-w-8xl mx-auto ",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 flex-col sm:flex-row gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"All Categories"}),e.jsx("input",{type:"text",placeholder:"Search category",className:"input input-bordered w-full sm:w-80",value:o,onChange:t=>b(t.target.value)})]}),d.length===0?e.jsx("div",{className:"text-gray-500 text-center mt-30",children:"No categories found."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-16",children:d.map(t=>e.jsxs("div",{className:"p-4 bg-white shadow rounded-md flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t.name}),t.access?e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{className:"btn btn-xs btn-outline btn-info",onClick:()=>p(t),children:"Edit"}),e.jsx("button",{className:"btn btn-xs btn-outline btn-error",onClick:()=>j(t.id),children:"Delete"})]}):null]},t.id))}),e.jsx("dialog",{id:"edit_modal",className:"modal",ref:a,children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Edit Category"}),e.jsx("input",{type:"text",value:r,onChange:t=>i(t.target.value),className:"input input-bordered w-full mb-4"}),e.jsx("div",{className:"modal-action",children:e.jsxs("form",{method:"dialog",className:"flex gap-3",onSubmit:t=>t.preventDefault(),children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:N,disabled:!r.trim(),children:"Save"}),e.jsx("button",{type:"button",className:"btn",onClick:u,children:"Cancel"})]})})]})})]})};export{D as default};
