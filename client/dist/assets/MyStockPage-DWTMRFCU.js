const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-oHO_bMXB.js","assets/index-CdwHP-N2.css","assets/ErrorMessage-C1rBwS37.js"])))=>i.map(i=>d[i]);
import{r as n,bX as he,ah as ge,K as fe,N as ye,bY as be,bZ as je,j as e,b_ as j,y as u,_ as Z}from"./index-oHO_bMXB.js";import{F as Ne,X as z,a7 as V,r as ve,a9 as I,b as Q,t as we,j as _e,O as L,i as G,f as ke,g as X}from"./index-DCVWk_eg.js";import{M as Y}from"./ModalPortal-CaX2GLzp.js";import"./index-DsfZBStp.js";const K=n.lazy(()=>Z(()=>import("./index-oHO_bMXB.js").then(q=>q.cH),__vite__mapDeps([0,1]))),Se=n.lazy(()=>Z(()=>import("./ErrorMessage-C1rBwS37.js"),__vite__mapDeps([2,0,1]))),Ae=({role:q})=>{const[l,J]=n.useState("new_stock"),[d,N]=n.useState(1),x=10,[W,P]=n.useState(!1),[c,M]=n.useState(!1),[T,H]=n.useState(!1),[s,p]=n.useState(null),[h,v]=n.useState(null),[O,w]=n.useState(!1),[o,g]=n.useState({product:"",variant:"",total_quantity:"",status:"in_stock",notes:"",batch_number:"",manufacture_date:"",expiry_date:""}),{data:i=[],isLoading:ee,isError:te,error:_,refetch:U}=he({status:l,page:d,pageSize:x}),{data:B=[],isLoading:se}=ge(s==null?void 0:s.id,{skip:!T||!(s!=null&&s.id)}),{data:k}=fe(),{data:S}=ye(h,{skip:!h}),[ae]=be(),[re]=je();n.useEffect(()=>{if(c&&s){v(s.product);const t=a=>a?new Date(a).toISOString().split("T")[0]:"";g({product:s.product,variant:s.variant,total_quantity:s.total_quantity,status:s.status,notes:s.notes||"",batch_number:s.batch_number||"",manufacture_date:t(s.manufacture_date),expiry_date:t(s.expiry_date)})}},[c,s]);const D=t=>{J(t),N(1)},ne=()=>{U(),u.success("Stock data refreshed!")},oe=()=>{g({product:"",variant:"",total_quantity:"",status:"in_stock",notes:"",batch_number:"",manufacture_date:"",expiry_date:""}),v(null),P(!0)},C=t=>{p(t),M(!0)},E=t=>{p(t),H(!0)},F=()=>{P(!1),M(!1),p(null)},le=()=>{H(!1),p(null)},m=t=>{const{name:a,value:r}=t.target;g(b=>({...b,[a]:r}))},ie=t=>{const a=t.target.value;v(a),g(r=>({...r,product:a,variant:""}))},ce=async t=>{var a;if(w(!0),t.preventDefault(),o.manufacture_date&&o.expiry_date){const r=new Date(o.manufacture_date);if(new Date(o.expiry_date)<=r){u.error("Expiry date must be after manufacture date"),w(!1);return}}try{const r={...o,product:h};c?(await re({id:s.id,...r}).unwrap(),u.success("Stock updated successfully!")):(await ae(r).unwrap(),u.success("Stock created successfully!")),U(),F()}catch(r){console.error("Error saving stock:",r),u.error(((a=r.data)==null?void 0:a.message)||"Stock already exists for this product-size combination. Please update instead.")}finally{w(!1)}},de=t=>{switch(t){case"ADD":return e.jsx(V,{className:"text-green-500 font-extrabold"});case"UPDATE":return e.jsx(L,{className:"text-blue-500 font-extrabold"});case"SELL":return e.jsx(I,{className:"text-red-500 font-extrabold"});default:return e.jsx(_e,{className:"text-gray-500"})}},xe=t=>{switch(t){case"ADD":return"bg-green-100 text-green-800";case"UPDATE":return"bg-blue-100 text-blue-800";case"SELL":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=t=>t?new Date(t).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"}):"N/A",y=t=>t?new Date(t)<new Date:!1,me=()=>{switch(l){case"new_stock":return e.jsxs("tr",{className:"bg-gradient-to-r from-indigo-50 to-purple-50",children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-indigo-700",children:"No."}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-indigo-700",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-indigo-700",children:"Product Info"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-indigo-700",children:"Variant"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-indigo-700",children:"Batch Info"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-indigo-700",children:"Stock Details"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-indigo-700",children:"Actions"})]});case"in_stock":return e.jsxs("tr",{className:"bg-gradient-to-r from-green-50 to-emerald-50",children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-green-700",children:"No."}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-green-700",children:"Last Updated"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-green-700",children:"Product Info"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-green-700",children:"Variant"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-green-700",children:"Batch Info"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-green-700",children:"Available Stock"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-green-700",children:"Actions"})]});case"out_of_stock":return e.jsxs("tr",{className:"bg-gradient-to-r from-red-50 to-orange-50",children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-red-700",children:"No."}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-red-700",children:"Stock Out Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-red-700",children:"Product Info"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-red-700",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-red-700",children:"Batch Info"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-red-700",children:"Last Stock"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-red-700",children:"Actions"})]});default:return null}},A=t=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs font-medium bg-gray-100 px-2 py-1 rounded",children:t.batch_number||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:"text-xs text-gray-600",children:["Mfg: ",f(t.manufacture_date)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:`w-3 h-3 ${y(t.expiry_date)?"text-red-400":"text-gray-400"}`}),e.jsxs("span",{className:`text-xs ${y(t.expiry_date)?"text-red-600 font-semibold":"text-gray-600"}`,children:["Exp: ",f(t.expiry_date),y(t.expiry_date)&&" (Expired)"]})]})]}),ue=(t,a)=>{var R,$;const r=e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:t.product_name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("h2",{children:"Brand:"})," ",t.brand_name]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("h2",{children:"Category:"})," ",t.category_name]})]}),b=e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium",children:t.category_name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.subcategory_name})]});switch(l){case"new_stock":return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-indigo-50/30 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:(d-1)*x+a+1}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-700",children:[new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(t.created_at).toLocaleTimeString()})]})}),e.jsx("td",{className:"px-6 py-4",children:r}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.variant_name})}),e.jsx("td",{className:"px-6 py-4",children:A(t)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Old:"}),e.jsx("span",{className:"text-sm font-medium",children:((R=t.last_history)==null?void 0:R.old_quantity)||0}),e.jsx("span",{className:"text-xs text-gray-500",children:"New:"}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["+",(($=t.last_history)==null?void 0:$.change_quantity)||0]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Total:"}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 font-bold",children:[e.jsx(G,{className:"mr-1"})," ",t.total_quantity]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs("button",{onClick:()=>C(t),className:"inline-flex items-center px-3 cursor-pointer py-1.5 border border-transparent text-xs font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 transition-colors shadow-sm",children:[e.jsx(L,{className:"mr-1"})," Edit"]}),e.jsxs("button",{onClick:()=>E(t),className:"inline-flex items-center cursor-pointer px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors shadow-sm",children:[e.jsx(j,{className:"mr-1"})," History"]})]})})]},t.id);case"in_stock":return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-green-50/30 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:(d-1)*x+a+1}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:new Date(t.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4",children:r}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:t.variant_name})}),e.jsx("td",{className:"px-6 py-4",children:A(t)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 shadow-sm",children:[e.jsx(G,{className:"mr-2"})," ",t.total_quantity," units"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs("button",{onClick:()=>C(t),className:"inline-flex items-center cursor-pointer px-3 py-1.5 border border-transparent text-xs font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 transition-colors shadow-sm",children:[e.jsx(L,{className:"mr-1"})," Update"]}),e.jsxs("button",{onClick:()=>E(t),className:"inline-flex items-center cursor-pointer px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors shadow-sm",children:[e.jsx(j,{className:"mr-1"})," History"]})]})})]},t.id);case"out_of_stock":return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-red-50/30 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:(d-1)*x+a+1}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:new Date(t.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-6 py-4",children:r}),e.jsx("td",{className:"px-6 py-4",children:b}),e.jsx("td",{className:"px-6 py-4",children:A(t)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium bg-red-100 text-red-800",children:[e.jsx(I,{className:"mr-2"})," Out of Stock"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs("button",{onClick:()=>C(t),className:"inline-flex items-center cursor-pointer px-3 py-1.5 border border-transparent text-xs font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 transition-colors shadow-sm",children:[e.jsx(z,{className:"mr-1"})," Restock"]}),e.jsxs("button",{onClick:()=>E(t),className:"inline-flex items-center cursor-pointer px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors shadow-sm",children:[e.jsx(j,{className:"mr-1"})," History"]})]})})]},t.id);default:return null}},pe=()=>{var t;return ee?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-12",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(K,{})})})}):te?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-12",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{children:"Error loading..."}),children:e.jsx(Se,{message:((t=_==null?void 0:_.data)==null?void 0:t.message)||"Failed to load stocks"})})})}):!i||i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 text-gray-500",children:[e.jsx(we,{className:"w-16 h-16 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-400",children:l==="new_stock"?"No stock items added today":l==="in_stock"?"No items in stock":"No out of stock items"}),e.jsx("p",{className:"text-sm",children:l==="new_stock"?"Items added today will appear here":l==="in_stock"?"Your in-stock items will appear here":"Your out of stock items will appear here"})]})})}):i.map((a,r)=>ue(a,r))};return e.jsxs("div",{className:"py-4 max-w-8xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Stock Management"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your stock inventory efficiently"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:ne,className:"inline-flex items-center px-4 cursor-pointer py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors transform hover:scale-105",children:[e.jsx(Ne,{className:"mr-2"})," Refresh"]}),l==="new_stock"&&e.jsxs("button",{onClick:oe,className:"inline-flex items-center cursor-pointer px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors transform hover:scale-105",children:[e.jsx(z,{className:"mr-2"})," Add Stock"]})]})]}),e.jsxs("div",{className:"flex space-x-1 rounded-xl bg-gradient-to-r from-indigo-50 to-purple-50 p-2 mb-8 shadow-sm",children:[e.jsxs("button",{className:`flex items-center px-6 py-3 rounded-lg text-sm font-medium transition-all transform cursor-pointer ${l==="new_stock"?"bg-white text-indigo-700 shadow-lg scale-105":"text-gray-600 hover:text-gray-900 hover:scale-102"}`,onClick:()=>D("new_stock"),children:[e.jsx(V,{className:"mr-2"}),"Today's Stock"]}),e.jsxs("button",{className:`flex items-center px-6 py-3 rounded-lg text-sm font-medium transition-all transform cursor-pointer ${l==="in_stock"?"bg-white text-green-700 shadow-lg scale-105":"text-gray-600 hover:text-gray-900 hover:scale-102"}`,onClick:()=>D("in_stock"),children:[e.jsx(ve,{className:"mr-2"}),"In Stock"]}),e.jsxs("button",{className:`flex items-center px-6 py-3 rounded-lg text-sm font-medium transition-all transform cursor-pointer ${l==="out_of_stock"?"bg-white text-red-700 shadow-lg scale-105":"text-gray-600 hover:text-gray-900 hover:scale-102"}`,onClick:()=>D("out_of_stock"),children:[e.jsx(I,{className:"mr-2"}),"Out of Stock"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:me()}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:pe()})]})}),(i==null?void 0:i.length)>0&&e.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-t border-gray-200 bg-gray-50/50",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(d-1)*x+1})," to"," ",e.jsx("span",{className:"font-medium",children:(d-1)*x+(i.length||0)})," of"," ",e.jsx("span",{className:"font-medium",children:i.length})," entries"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors transform hover:scale-105",disabled:d===1,onClick:()=>N(t=>Math.max(1,t-1)),children:"Previous"}),e.jsx("button",{className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors transform hover:scale-105",disabled:i.length<x,onClick:()=>N(t=>t+1),children:"Next"})]})]})]}),(W||c)&&e.jsx(Y,{children:e.jsx("div",{className:"fixed inset-0 bg-black/50  flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:c?"Edit Stock":"Add New Stock"}),e.jsx("button",{onClick:F,className:"text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",children:e.jsx(Q,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:ce,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product"}),c?e.jsx("input",{type:"text",value:s==null?void 0:s.product_name,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-gray-50",readOnly:!0}):e.jsxs("select",{name:"product",value:o.product,onChange:ie,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select a product"}),k==null?void 0:k.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Variant"}),c?e.jsx("input",{type:"text",value:s==null?void 0:s.variant_name,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-gray-50",readOnly:!0}):e.jsxs("select",{name:"variant",value:o.variant,onChange:m,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0,disabled:!h,children:[e.jsx("option",{value:"",children:"Select a variant"}),S==null?void 0:S.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),e.jsx("input",{type:"number",name:"total_quantity",value:o.total_quantity,onChange:m,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0,min:"1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Batch Number"}),e.jsx("input",{type:"text",name:"batch_number",value:o.batch_number,onChange:m,className:"block w-full cursor-pointer px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0,placeholder:"Enter batch number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Manufacture Date"}),e.jsx("input",{type:"date",name:"manufacture_date",value:o.manufacture_date,onChange:m,className:"block w-full cursor-pointer px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expiry Date"}),e.jsx("input",{type:"date",name:"expiry_date",value:o.expiry_date,onChange:m,className:"block w-full cursor-pointer px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("select",{name:"status",value:o.status,onChange:m,className:"block w-full cursor-pointer px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0,children:e.jsx("option",{value:"in_stock",children:"New Stock Adding"})})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{name:"notes",value:o.notes,onChange:m,className:"block w-full cursor-pointer px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",rows:"3",placeholder:"Add any notes about this stock item..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 cursor-pointer border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:O,className:`px-4 py-2 cursor-pointer border border-transparent rounded-md shadow-sm text-sm font-medium text-white 
                    ${O?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"} 
                    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors`,children:c?"Update Stock":"Save Stock"})]})]})]})})}),T&&s&&e.jsx(Y,{children:e.jsx("div",{className:"fixed inset-0 bg-black/50  flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-extrabold text-gray-900",children:"Stock History"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 font-extrabold",children:[s.product_name," - ",s.variant_name]}),e.jsxs("div",{className:"text-xs text-gray-600 font-bold mt-1",children:["Batch: ",s.batch_number," | Mfg: ",f(s.manufacture_date)," | Exp: ",f(s.expiry_date),y(s.expiry_date)&&e.jsx("span",{className:"text-red-600 font-semibold",children:" (Expired)"})]})]}),e.jsx("button",{onClick:le,className:"text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",children:e.jsx(Q,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:se?e.jsx("div",{className:"text-center py-8",children:e.jsx(K,{})}):B.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(j,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{children:"No history available for this stock item"})]}):e.jsx("div",{className:"space-y-4",children:B.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[de(t.action),e.jsxs("div",{children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-extrabold ${xe(t.action)}`,children:t.action}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:new Date(t.created_at).toLocaleString()})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:[e.jsx("h2",{children:"Old: "}),t.old_quantity]}),e.jsxs("span",{className:`font-medium ${t.action==="ADD"?"text-green-600":t.action==="SELL"?"text-red-600":"text-blue-600"}`,children:[t.action==="ADD"?"+":t.action==="SELL"?"-":"Â±","(",t.change_quantity,")"]}),e.jsxs("span",{className:"font-bold text-gray-900",children:["New: ",t.new_quantity]})]})})]},a))})})]})})})]})};export{Ae as default};
