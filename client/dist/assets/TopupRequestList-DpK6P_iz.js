import{ci as B,r as l,j as e,L as v,y as D}from"./index-oHO_bMXB.js";import{f as t}from"./format-PgvnqH7J.js";import"./en-US-CEmq6YZe.js";const E={PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",INVALID_SCREENSHOT:"bg-red-100 text-red-800",INVALID_AMOUNT:"bg-red-100 text-red-800"},V={PENDING:e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),APPROVED:e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),REJECTED:e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})},A=({role:n})=>{var x;const{data:y={},isLoading:k,isError:L,error:a,refetch:o}=B(),[d,M]=l.useState(null),[r,_]=l.useState(null),i=y.results||[],c=s=>{M(s),document.getElementById("screenshot_modal").showModal()},C=s=>{_(r===s?null:s)},R=()=>{o(),D.success("Requests refreshed successfully")};return k?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):L?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-lg p-6 bg-white rounded-lg shadow",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Error loading requests"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:((x=a==null?void 0:a.data)==null?void 0:x.message)||"Please try again later"}),e.jsx("button",{onClick:o,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Retry"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 py-4 ",children:[e.jsxs("div",{className:"max-w-8xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Topup Requests"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"View all your wallet topup requests and their status"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:R,className:"inline-flex items-center cursor-pointer px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),e.jsxs(v,{to:`/${n}/topup-request`,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"New TopUp Request"]})]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:i.length===0?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No topup requests found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You haven't created any topup requests yet."}),e.jsx("div",{className:"mt-6",children:e.jsx(v,{to:`/${n}/topup-request`,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create Your First Request"})})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider",children:"Method"}),e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs font-bold text-black uppercase tracking-wider",children:"Screenshot"}),e.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-right text-xs font-bold text-black uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(s=>{var m,h,p,j,u,g,b,f,w,N;return e.jsxs(l.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:["â‚¹",s.amount]})})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-6 font-bold rounded-full bg-blue-200 text-blue-800 capitalize",children:s.payment_method})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:`px-2 inline-flex text-md leading-5 font-semibold rounded-full ${E[s.status.toUpperCase()]||"bg-gray-100 text-gray-800"} capitalize`,children:[V[s.status.toUpperCase()],s.status]})})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-700",children:[t(new Date(s.created_at),"MMM d, yyyy"),e.jsx("br",{}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:t(new Date(s.created_at),"h:mm a")})]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:s.screenshot?e.jsxs("button",{onClick:()=>c(s.screenshot),className:"text-sm text-blue-600  hover:bg-amber-100 hover:text-red-400 hover:cursor-pointer flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"View"]}):e.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>C(s.id),className:"text-blue-600 hover:text-red-900 flex items-center justify-end w-full cursor-pointer",children:r===s.id?e.jsxs("span",{className:"flex items-center font-bold",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Less Details"]}):e.jsxs("span",{className:"flex items-center font-bold",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"More Details"]})})})]},s.id),r===s.id&&e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:"6",className:"px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"font-extrabold text-gray-900 mb-3 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Transaction Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-bold mb-1",children:"Note"}),e.jsx("p",{className:"text-sm",children:s.note||e.jsx("span",{className:"text-gray-400",children:"Not provided"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-bold",children:"Payment Method"}),e.jsx("p",{className:"text-sm font-bold",children:s.payment_method})]}),((h=(m=s.payment_details)==null?void 0:m.details)==null?void 0:h.upi_id)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-extrabold",children:"UPI ID"}),e.jsx("p",{className:"text-sm font-extrabold",children:s.payment_details.details.upi_id})]})]})]}),s.payment_method==="bank"&&e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"font-extrabold text-gray-900 mb-3 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),"Bank Details"]}),e.jsxs("div",{className:"space-y-3",children:[((j=(p=s.payment_details)==null?void 0:p.details)==null?void 0:j.account_holder_name)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-bold",children:"Account Holder"}),e.jsx("p",{className:"text-sm font-bold",children:s.payment_details.details.account_holder_name})]}),((g=(u=s.payment_details)==null?void 0:u.details)==null?void 0:g.bank_name)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-extrabold",children:"Bank Name"}),e.jsx("p",{className:"text-sm font-bold",children:s.payment_details.details.bank_name})]}),((f=(b=s.payment_details)==null?void 0:b.details)==null?void 0:f.account_number)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-extrabold",children:"Account Number"}),e.jsx("p",{className:"text-sm font-bold",children:s.payment_details.details.account_number})]}),((N=(w=s.payment_details)==null?void 0:w.details)==null?void 0:N.ifsc_code)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-extrabold",children:"IFSC Code"}),e.jsx("p",{className:"text-sm font-bold",children:s.payment_details.details.ifsc_code})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:" text-gray-800 mb-3 flex items-center font-extrabold",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Timeline"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-bold",children:"Created At"}),e.jsx("p",{className:"text-sm font-bold",children:t(new Date(s.created_at),"MMM d, yyyy h:mm a")})]}),s.reviewed_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Reviewed At"}),e.jsx("p",{className:"text-sm",children:t(new Date(s.reviewed_at),"MMM d, yyyy h:mm a")})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"font-extrabold text-gray-900 mb-3 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Status Information"]}),e.jsxs("div",{className:"space-y-3",children:[s.approved_by&&e.jsxs("div",{children:[e.jsx("p",{className:"text-md text-gray-500 mb-1 font-bold",children:"Approved By(Name)"}),e.jsx("p",{className:"text-sm text-green-600 font-bold  capitalize",children:s.approved_by})]}),s.rejected_reason&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm text-red-600 font-bold",children:s.rejected_reason})]})]})]}),s.screenshot&&e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Payment Proof"]}),e.jsxs("button",{onClick:()=>c(s.screenshot),className:"w-full",children:[e.jsx("img",{src:s.screenshot,alt:"Payment proof",className:"w-full h-auto rounded-md border border-gray-200 max-h-40 object-contain"}),e.jsx("p",{className:"mt-2 text-sm text-blue-600 text-center font-bold hover:cursor-pointer",children:"Click to view full size"})]})]})]})]})})})]},s.id)})})]})})})]}),e.jsxs("dialog",{id:"screenshot_modal",className:"modal",children:[e.jsxs("div",{className:"modal-box max-w-4xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Payment Screenshot"}),e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-circle btn-sm",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),d&&e.jsx("div",{className:"overflow-auto max-h-[70vh] flex justify-center",children:e.jsx("img",{src:d,alt:"Payment Screenshot",className:"max-w-full h-auto rounded-lg border border-gray-200"})})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{children:"close"})})]})]})};export{A as default};
