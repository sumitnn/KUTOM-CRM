import{c as j,r as l,j as e,L as N,y as t}from"./index-0HRytCPr.js";import{m as a}from"./proxy-BmeAfvST.js";const C=()=>{const{userid:h,token:b}=j(),[r,f]=l.useState(""),[c,g]=l.useState(""),[w,y]=l.useState(!1),[n,m]=l.useState(!1),v=async s=>{if(s.preventDefault(),r.length<8)return t.error("Password must be at least 8 characters long.");if(r!==c)return t.error("Passwords do not match.");m(!0);try{const o=await fetch("https://api.stocktn.com/api/reset-password/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_password:r,userid:h,token:b})}),x=await o.json();o.ok?(y(!0),t.success(x.detail||"Password reset successfully.")):t.error(x.detail||"Failed to reset password.")}catch(o){console.error("Reset password error:",o),t.error("Something went wrong. Please try again.")}finally{m(!1)}},u={animate:{y:[0,-20,0],x:[0,10,0],transition:{duration:7,repeat:1/0,ease:"easeInOut"}}},d={animate:{scale:[1,1.1,1],opacity:[.3,.6,.3],transition:{duration:5,repeat:1/0,ease:"easeInOut"}}},p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},i={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 relative overflow-hidden",children:[e.jsx(a.div,{className:"absolute top-24 right-16 w-14 h-14 bg-green-300 rounded-full blur-xl opacity-40",variants:u,animate:"animate"}),e.jsx(a.div,{className:"absolute bottom-28 left-20 w-18 h-18 bg-emerald-300 rounded-full blur-xl opacity-30",variants:u,animate:"animate",style:{animationDelay:"1.5s"}}),e.jsx(a.div,{className:"absolute top-1/3 left-1/3 w-20 h-20 bg-teal-200 rounded-full blur-2xl opacity-25",variants:d,animate:"animate"}),e.jsx(a.div,{className:"absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-r from-green-400 to-emerald-400 rounded-full opacity-10 blur-3xl",variants:d,animate:"animate"}),e.jsx(a.div,{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-r from-teal-400 to-cyan-400 rounded-full opacity-10 blur-3xl",variants:d,animate:"animate",style:{animationDelay:"2s"}}),e.jsx(a.div,{className:"max-w-md w-full p-8 bg-white shadow-2xl rounded-3xl relative z-10",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:e.jsxs(a.div,{variants:p,initial:"hidden",animate:"visible",children:[e.jsxs(a.div,{variants:i,className:"text-center mb-8",children:[e.jsx(a.h2,{className:"text-3xl font-bold text-gray-800 mb-3",whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:"Reset Password"}),e.jsx("p",{className:"text-gray-600",children:"Create your new password"})]}),w?e.jsxs(a.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"text-center space-y-6",children:[e.jsx(a.div,{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:.8},children:e.jsx("span",{className:"text-3xl",children:"ðŸŽ‰"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-600 font-semibold text-xl mb-2",children:"Password Reset Successfully!"}),e.jsx("p",{className:"text-gray-600",children:"Your password has been updated successfully."})]}),e.jsx(a.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"pt-4",children:e.jsx(N,{to:"/login",className:"inline-block bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-8 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl",children:"Go to Login"})})]}):e.jsxs(a.form,{onSubmit:v,className:"space-y-6",variants:p,children:[e.jsxs(a.div,{variants:i,className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-bold text-gray-700 mb-2 text-lg",children:"New Password"})}),e.jsx(a.input,{id:"password",type:"password",className:"input input-bordered w-full text-lg py-3 px-4 border-2 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all duration-300",placeholder:"Enter new password",value:r,onChange:s=>f(s.target.value),required:!0,minLength:8,whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(16, 185, 129, 0.1)"},transition:{type:"spring",stiffness:400}}),e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text-alt text-gray-500",children:"Must be at least 8 characters long"})})]}),e.jsxs(a.div,{variants:i,className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text font-bold text-gray-700 mb-2 text-lg",children:"Confirm Password"})}),e.jsx(a.input,{id:"confirmpassword",type:"password",className:"input input-bordered w-full text-lg py-3 px-4 border-2 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all duration-300",placeholder:"Confirm new password",value:c,onChange:s=>g(s.target.value),required:!0,whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(16, 185, 129, 0.1)"},transition:{type:"spring",stiffness:400}})]}),e.jsx(a.div,{variants:i,className:"pt-2",children:e.jsx(a.button,{type:"submit",className:"btn btn-success w-full text-lg py-3 font-semibold rounded-xl",disabled:n,whileHover:{scale:n?1:1.02,boxShadow:"0 10px 25px -5px rgba(16, 185, 129, 0.4)"},whileTap:{scale:n?1:.98},transition:{type:"spring",stiffness:400,damping:17},children:n?e.jsxs(a.span,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),"Resetting Password..."]}):"Reset Password"})})]})]})})]})};export{C as default};
