const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PriceEditModal-Bd0KLAQi.js","assets/index-0HRytCPr.js","assets/index-DfS9FcIS.css","assets/index--WZidvUd.js","assets/ModalPortal-Boos_dt6.js","assets/index-D-omREhy.js","assets/VariantsModal-CYbyVgv0.js","assets/ProductDetailsModal-CWnHGDpu.js"])))=>i.map(i=>d[i]);
import{r,a0 as ue,a1 as ge,a2 as je,a3 as pe,a4 as be,a5 as Ne,a6 as ye,j as e,y as i,_ as S}from"./index-0HRytCPr.js";import{F as fe,B as ve,C as q,H as we,w as Se,e as _e,t as Fe,n as Ce,o as Pe,I as ke,J as Me}from"./index--WZidvUd.js";/* empty css                      */const Oe=r.lazy(()=>S(()=>import("./PriceEditModal-Bd0KLAQi.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ae=r.lazy(()=>S(()=>import("./VariantsModal-CYbyVgv0.js"),__vite__mapDeps([6,1,2,3,4,5]))),Ve=r.lazy(()=>S(()=>import("./ProductDetailsModal-CWnHGDpu.js"),__vite__mapDeps([7,1,2,3,4,5]))),Ee=()=>e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"loading loading-spinner text-primary loading-lg"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})}),Ie=()=>{var B,T,Q;const[l,_]=r.useState({search:"",featured:"all",brand:"all",category:"all",subcategory:"all"}),[g,F]=r.useState({}),[d,x]=r.useState(1),[C,J]=r.useState(10),[p,X]=r.useState("name"),[b,P]=r.useState("asc"),[k,M]=r.useState(!1),[O,A]=r.useState(!1),[V,j]=r.useState(!1),[n,E]=r.useState(null),{data:N}=ue(),{data:y}=ge(),{data:f}=je(l.category!=="all"?l.category:null,{skip:l.category==="all"}),[W]=pe(),[L]=be(),[Y]=Ne(),{data:Z,isLoading:ee,isError:se,refetch:R}=ye({page:d,pageSize:C,...g,sortField:p,sortDirection:b}),v=Z||{},w=v.results||[],D=v.count||0,o=v.total_pages||1,m=(s,a)=>{_(t=>({...t,[s]:a}))},I=()=>{const s={search:l.search||"",featured:l.featured!=="all"?l.featured:"",category:l.category!=="all"?l.category:"",brand:l.brand!=="all"?l.brand:"",subcategory:l.subcategory!=="all"?l.subcategory:""};F(s),x(1)},U=()=>{_({search:"",featured:"all",brand:"all",category:"all",subcategory:"all"}),F({}),x(1)},ae=()=>{R(),i.success("Products refreshed")},te=s=>{p===s?P(b==="asc"?"desc":"asc"):(X(s),P("asc")),x(1)},le=async(s,a)=>{try{const t=!a;await Y({productId:s,isFeatured:t}).unwrap(),i.success(`Product featured status ${t?"enabled":"disabled"}`)}catch{i.error("Failed to update featured status")}},re=async s=>{try{await L({productId:n.id,priceData:s}).unwrap(),i.success("Prices updated successfully"),A(!1)}catch{i.error("Failed to update prices")}},ne=async(s,a)=>{var t;try{await L({productId:(t=n==null?void 0:n.product_detail)==null?void 0:t.id,variantId:s,priceData:a}).unwrap(),j(!1),i.success("Variant prices updated successfully")}catch{i.error("Failed to update variant prices")}},ce=async(s,a)=>{var t;try{await W({productId:(t=n==null?void 0:n.product_detail)==null?void 0:t.id,variantId:s,commissionData:a}).unwrap(),j(!1),i.success("Variant commission saved successfully")}catch{i.error("Failed to save variant commission")}},ie=s=>{E(s),M(!0)},de=s=>{E(s),j(!0)},z=s=>{var a;return((a=s.inventories)==null?void 0:a.reduce((t,c)=>t+(c.total_quantity||0),0))||0},oe=s=>{const a=z(s);return a===0?e.jsx("span",{className:"badge badge-error badge-sm",children:"Out of Stock"}):a<10?e.jsx("span",{className:"badge badge-warning badge-sm",children:"Low Stock"}):e.jsx("span",{className:"badge badge-success badge-sm",children:"In Stock"})},xe=s=>{var t;const a=((t=s.product_detail)==null?void 0:t.images)||[];if(a.length>0){const c=a.find(u=>u.is_default),h=a.find(u=>u.is_featured);return(c==null?void 0:c.image)||(h==null?void 0:h.image)||a[0].image}return"/placeholder.png"},me=s=>{var a;return((a=s.product_detail)==null?void 0:a.variants)&&s.product_detail.variants.length>0},he=({field:s,children:a})=>e.jsx("th",{className:"cursor-pointer hover:bg-gray-50",onClick:()=>te(s),children:e.jsxs("div",{className:"flex items-center gap-1",children:[a,p===s&&(b==="asc"?e.jsx(ke,{size:14}):e.jsx(Me,{size:14}))]})});return e.jsxs("div",{className:"py-4 max-w-8xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"My Products"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and monitor your product listings"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:ae,className:"btn btn-outline btn-sm lg:btn-md",children:[e.jsx(fe,{className:"mr-2"}),"Refresh"]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4 lg:p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-4 gap-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ve,{className:"text-gray-600"}),"Filters & Search"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:I,className:"btn btn-primary btn-sm",children:[e.jsx(q,{className:"mr-2"}),"Apply Filters"]}),e.jsxs("button",{onClick:U,className:"btn btn-ghost btn-sm",children:[e.jsx(we,{className:"mr-2"}),"Clear All"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Search Products"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by name or SKU...",className:"input input-bordered w-full pl-10",value:l.search,onChange:s=>m("search",s.target.value),onKeyDown:s=>s.key==="Enter"&&I()}),e.jsx(q,{className:"absolute left-3 top-3 text-gray-400"})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Featured Status"})}),e.jsxs("select",{className:"select select-bordered",value:l.featured,onChange:s=>m("featured",s.target.value),children:[e.jsx("option",{value:"all",children:"All Products"}),e.jsx("option",{value:"true",children:"Featured Only"}),e.jsx("option",{value:"false",children:"Not Featured"})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Category"})}),e.jsxs("select",{className:"select select-bordered",value:l.category,onChange:s=>{m("category",s.target.value),m("subcategory","all")},children:[e.jsx("option",{value:"all",children:"All Categories"}),(B=y==null?void 0:y.results)==null?void 0:B.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Subcategory"})}),e.jsxs("select",{className:"select select-bordered",value:l.subcategory,onChange:s=>m("subcategory",s.target.value),disabled:l.category==="all",children:[e.jsx("option",{value:"all",children:"All Subcategories"}),(T=f==null?void 0:f.results)==null?void 0:T.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Brand"})}),e.jsxs("select",{className:"select select-bordered",value:l.brand,onChange:s=>m("brand",s.target.value),children:[e.jsx("option",{value:"all",children:"All Brands"}),(Q=N==null?void 0:N.results)==null?void 0:Q.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Items Per Page"})}),e.jsxs("select",{className:"select select-bordered",value:C,onChange:s=>J(Number(s.target.value)),children:[e.jsx("option",{value:5,children:"5 per page"}),e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:25,children:"25 per page"})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Active Filters"})}),e.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-50 rounded",children:Object.keys(g).length===0?e.jsx("span",{className:"text-gray-500 text-sm",children:"No active filters"}):Object.entries(g).map(([s,a])=>a&&e.jsxs("span",{className:"badge badge-primary badge-sm",children:[s,": ",a]},s))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"flex justify-between items-center p-4 border-b bg-gray-50",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Product List"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",w.length," of ",D," products"]})]})}),ee?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"loading loading-spinner text-primary loading-lg"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading products..."})]})}):se?e.jsx("div",{className:"text-center py-10",children:e.jsxs("div",{className:"alert alert-error max-w-md mx-auto",children:[e.jsx("div",{children:e.jsx("span",{children:"Failed to load products."})}),e.jsx("button",{className:"btn btn-sm btn-outline mt-4",onClick:R,children:"Retry"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx(he,{field:"name",children:"Product"}),e.jsx("th",{children:"SKU"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Brand"}),e.jsx("th",{children:"Stock"}),e.jsx("th",{children:"Featured"}),e.jsx("th",{children:"Variants"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:w.map(s=>{var c,h,u,G,K,$,H;const a=z(s),t=(s==null?void 0:s.variants_detail.length)||0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded",children:e.jsx("img",{src:xe(s),alt:(c=s.product_detail)==null?void 0:c.name,className:"object-cover w-full h-full"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:(h=s.product_detail)==null?void 0:h.name}),e.jsx("div",{className:"text-sm text-gray-500 whitespace-nowrap",children:(u=s.product_detail)==null?void 0:u.product_type_display})]})]})}),e.jsx("td",{className:"font-bold text-sm whitespace-nowrap",children:(G=s.product_detail)==null?void 0:G.sku}),e.jsxs("td",{children:[e.jsx("div",{children:(K=s.product_detail)==null?void 0:K.category_name}),e.jsx("div",{className:"text-xs text-gray-500",children:($=s.product_detail)==null?void 0:$.subcategory_name})]}),e.jsx("td",{children:(H=s.product_detail)==null?void 0:H.brand_name}),e.jsx("td",{children:e.jsxs("div",{className:"flex flex-col gap-1 whitespace-nowrap",children:[oe(s),e.jsxs("span",{className:"text-xs text-gray-600 whitespace-nowrap",children:["Qty: ",a]})]})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>le(s.id,s.is_featured),className:`btn btn-xs ${s.is_featured?"btn-primary":"btn-ghost"}`,children:s.is_featured?"Featured":"Not Featured"})}),e.jsx("td",{children:me(s)?e.jsxs("button",{onClick:()=>de(s),className:"btn btn-xs btn-outline whitespace-nowrap",children:[e.jsx(Se,{className:"mr-1"}),t," Variants"]}):e.jsx("span",{className:"text-xs text-gray-500",children:"No variants"})}),e.jsx("td",{children:e.jsx("div",{className:"flex gap-1",children:e.jsx("button",{onClick:()=>ie(s),className:"btn btn-xs btn-ghost",title:"View Details",children:e.jsx(_e,{})})})})]},s.id)})})]}),w.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx(Fe,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No products found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:Object.keys(g).length>0?"Try adjusting your search or filter criteria":"There are currently no products available"}),Object.keys(g).length>0&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:U,className:"btn btn-primary",children:"Clear all filters"})})]})]}),o>1&&e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center p-4 border-t gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",d," of ",o," â€¢ ",D," total products"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>x(s=>Math.max(s-1,1)),disabled:d===1,className:"btn btn-sm btn-outline",children:[e.jsx(Ce,{className:"mr-1"}),"Previous"]}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,o)},(s,a)=>{let t;return o<=5||d<=3?t=a+1:d>=o-2?t=o-4+a:t=d-2+a,e.jsx("button",{onClick:()=>x(t),className:`btn btn-sm ${d===t?"btn-primary":"btn-outline"}`,children:t},t)})}),e.jsxs("button",{onClick:()=>x(s=>Math.min(s+1,o)),disabled:d===o,className:"btn btn-sm btn-outline",children:["Next",e.jsx(Pe,{className:"ml-1"})]})]})]})]})]}),e.jsx(r.Suspense,{fallback:null,children:k&&e.jsx(Ve,{product:n,isOpen:k,onClose:()=>M(!1)})}),e.jsx(r.Suspense,{fallback:null,children:O&&e.jsx(Oe,{product:n,isOpen:O,onClose:()=>A(!1),onSave:re})}),e.jsx(r.Suspense,{fallback:e.jsx(Ee,{}),children:V&&e.jsx(Ae,{product:n,isOpen:V,onClose:()=>j(!1),onUpdatePrice:ne,onUpdateCommission:ce})})]})};export{Ie as default};
