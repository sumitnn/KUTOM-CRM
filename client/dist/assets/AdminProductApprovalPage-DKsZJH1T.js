import{a as ae,r as h,bN as f,bO as re,j as e,y as $}from"./index-0HRytCPr.js";import{t as le,S as E,h as I,c as R,e as w,a5 as k,C as ie,B as de,b as ne,x as ce,z as oe,Z as xe,r as me,a6 as ue}from"./index--WZidvUd.js";const be=()=>{var L,T,U;const j=ae(),[t,z]=h.useState("pending"),[i,b]=h.useState(1),[c]=h.useState(10),[n,P]=h.useState(""),[l,y]=h.useState({}),[B,M]=h.useState({category:"",brand:"",vendor:""}),{data:o,isLoading:O,isFetching:V,refetch:G}=f({status:"draft",page:i,pageSize:c,search:n},{skip:t!=="pending"}),{data:x,isLoading:Q,isFetching:q,refetch:K}=f({status:"published",page:i,pageSize:c,search:n},{skip:t!=="published"}),{data:m,isLoading:X,isFetching:Z,refetch:H}=f({status:"active",page:i,pageSize:c,search:n},{skip:t!=="active"}),{data:u,isLoading:J,isFetching:W,refetch:Y}=f({status:"inactive",page:i,pageSize:c,search:n},{skip:t!=="inactive"}),[D]=re(),v=s=>s?s.map(r=>{const a=r.product_detail||{};return{id:r.id,product:r.product,sku:a.sku,name:a.name,vendorId:r.user_unique_id||"N/A",vendorName:r.user_name||"N/A",brand:a.brand_name,category:a.category_name,subcategory:a.subcategory_name,type:a.product_type,status:a.status,statusDisplay:a.status_display,createdAt:a.created_at||r.created_at,updatedAt:a.updated_at||r.updated_at,isFeatured:r.is_featured||a.is_featured,productType:a.product_type,productTypeDisplay:a.product_type_display,images:a.images,features:a.features,description:a.description,weight:a.weight,weightUnit:a.weight_unit,dimensions:a.dimensions}}):[],d=(()=>{const s=o||x||m||u;return{pending:(s==null?void 0:s.total_draft)||0,published:(s==null?void 0:s.total_published)||0,active:(s==null?void 0:s.total_active)||0,inactive:(s==null?void 0:s.total_inactive)||0,total:(s==null?void 0:s.total_products)||0}})(),g={pending:{data:v(o==null?void 0:o.results),count:(o==null?void 0:o.current_status_count)||0},published:{data:v(x==null?void 0:x.results),count:(x==null?void 0:x.current_status_count)||0},active:{data:v(m==null?void 0:m.results),count:(m==null?void 0:m.current_status_count)||0},inactive:{data:v(u==null?void 0:u.results),count:(u==null?void 0:u.current_status_count)||0}},F=()=>{y(r=>({...r,refresh:!0})),(()=>{switch(t){case"pending":return G();case"published":return K();case"active":return H();case"inactive":return Y();default:return Promise.resolve()}})().finally(()=>{y(r=>({...r,refresh:!1}))})},N=async(s,r)=>{y(a=>({...a,[s]:!0}));try{await D({id:s,status:r}).unwrap(),$.success(`ðŸŽ‰ Product status changed to ${r}`),F()}catch(a){console.error("Failed to update status:",a),$.error("Failed to update product status")}finally{y(a=>({...a,[s]:!1}))}},_=s=>{b(s)},ee=s=>{j(`/admin/products/edit/${s}`)},se=s=>{j(`/admin/products/${s}`)},S=()=>{M({category:"",brand:"",vendor:""}),P(""),b(1)},A=t==="pending"&&O||t==="published"&&Q||t==="active"&&X||t==="inactive"&&J,p=t==="pending"&&V||t==="published"&&q||t==="active"&&Z||t==="inactive"&&W,C=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",te=s=>{switch(s){case"published":return"bg-blue-100 text-blue-800 border-blue-200";case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-red-100 text-red-800 border-red-200";case"draft":default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}};return e.jsx("div",{className:"min-h-screen py-4 ",children:e.jsxs("div",{className:"max-w-8xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-2xl",children:e.jsx(le,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Product Approval"}),e.jsx("p",{className:"text-gray-600 mt-2 text-lg",children:"Manage and review vendor product submissions"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-gray-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Products"})]}),e.jsxs("div",{className:"bg-yellow-50/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-yellow-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:d.pending}),e.jsx("div",{className:"text-sm text-yellow-600",children:"Pending Review"})]}),e.jsxs("div",{className:"bg-blue-50/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-blue-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:d.published}),e.jsx("div",{className:"text-sm text-blue-600",children:"Published"})]}),e.jsxs("div",{className:"bg-green-50/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-green-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:d.active}),e.jsx("div",{className:"text-sm text-green-600",children:"Active"})]}),e.jsxs("div",{className:"bg-red-50/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-red-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-red-700",children:d.inactive}),e.jsx("div",{className:"text-sm text-red-600",children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:e.jsxs("button",{onClick:F,disabled:l.refresh||p,className:"flex items-center justify-center gap-2 px-4 py-3 bg-white/80 backdrop-blur-sm border border-gray-300 rounded-2xl text-gray-700 font-semibold hover:bg-white transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer shadow-sm hover:shadow-md",children:[e.jsx(E,{className:`w-4 h-4 ${l.refresh||p?"animate-spin":""}`}),l.refresh||p?"Refreshing...":"Refresh"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-2 shadow-sm border border-gray-200/50 mb-6",children:e.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[{id:"pending",label:"Pending",icon:I,color:"yellow",count:d.pending},{id:"published",label:"Published",icon:R,color:"blue",count:d.published},{id:"active",label:"Active",icon:w,color:"green",count:d.active},{id:"inactive",label:"Inactive",icon:k,color:"red",count:d.inactive}].map(s=>{const r=s.icon;return e.jsxs("button",{onClick:()=>{z(s.id),b(1)},className:`flex items-center gap-2 px-4 py-3 rounded-xl font-semibold transition-all duration-300 whitespace-nowrap cursor-pointer ${t===s.id?`bg-${s.color}-500 text-white shadow-lg`:"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(r,{className:"w-4 h-4"}),s.label,e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t===s.id?"bg-white/20 text-white":`bg-${s.color}-100 text-${s.color}-700`}`,children:s.count})]},s.id)})})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300",placeholder:"Search products by name, SKU or vendor...",value:n,onChange:s=>{P(s.target.value),b(1)}})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 transition-all duration-300 cursor-pointer",children:[e.jsx(de,{className:"w-4 h-4"}),"Filters"]}),(n||Object.values(B).some(Boolean))&&e.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-3 bg-red-50 border border-red-200 rounded-xl text-red-700 font-semibold hover:bg-red-100 transition-all duration-300 cursor-pointer",children:[e.jsx(ne,{className:"w-4 h-4"}),"Clear"]})]})]})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-sm border border-gray-200/50 overflow-hidden",children:[(A||p)&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"loading loading-spinner text-primary loading-lg mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]}),!A&&!p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200/50",children:[e.jsx("thead",{className:"bg-gray-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Product"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Vendor"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200/50",children:((T=(L=g[t])==null?void 0:L.data)==null?void 0:T.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-20 w-20 text-gray-400 mb-4",children:t==="pending"?e.jsx(I,{className:"w-full h-full"}):t==="published"?e.jsx(R,{className:"w-full h-full"}):t==="active"?e.jsx(w,{className:"w-full h-full"}):e.jsx(k,{className:"w-full h-full"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t==="pending"?"No pending products":t==="published"?"No published products":t==="active"?"No active products":"No inactive products"}),e.jsx("p",{className:"text-gray-600 mb-4",children:n?"Try adjusting your search criteria":`No ${t} products found in the system`}),n&&e.jsx("button",{onClick:S,className:"btn btn-primary cursor-pointer",children:"Clear Search"})]})})}):g[t].data.map((s,r)=>{var a;return e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[((a=s.images)==null?void 0:a[0])&&e.jsx("img",{src:s.images[0].image,alt:s.name,className:"w-12 h-12 rounded-lg object-cover border border-gray-200"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 line-clamp-1",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500 font-mono mt-1",children:s.sku}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ce,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-600 capitalize",children:s.productTypeDisplay||s.productType})]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.vendorName}),e.jsx("div",{className:"text-xs text-gray-500",children:s.vendorId})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.category||"N/A"}),s.subcategory&&e.jsx("div",{className:"text-xs text-gray-500",children:s.subcategory}),s.brand&&e.jsx("div",{className:"text-xs text-blue-600 font-semibold",children:s.brand})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold border ${te(s.status)}`,children:s.statusDisplay||s.status})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:C(s.createdAt)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Updated: ",C(s.updatedAt)]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("button",{onClick:()=>se(s.id),className:"flex items-center gap-2 px-3 py-2 bg-blue-50 text-blue-700 rounded-lg font-semibold hover:bg-blue-100 transition-all duration-300 cursor-pointer text-sm",children:[e.jsx(w,{className:"w-4 h-4"}),"View"]}),t==="pending"&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>ee(s.id),className:"flex items-center gap-2 px-3 py-2 bg-gray-50 text-gray-700 rounded-lg font-semibold hover:bg-gray-100 transition-all duration-300 cursor-pointer text-sm",children:[e.jsx(xe,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>N(s.product,"published"),disabled:l[s.product],className:"flex items-center gap-2 px-3 py-2 bg-green-50 text-green-700 rounded-lg font-semibold hover:bg-green-100 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer text-sm",children:[l[s.product]?e.jsx("div",{className:"w-4 h-4 border-2 border-green-700 border-t-transparent rounded-full animate-spin"}):e.jsx(me,{className:"w-4 h-4"}),l[s.product]?"Publishing...":"Publish"]})]}),t==="published"&&e.jsxs("button",{onClick:()=>N(s.product,"draft"),disabled:l[s.product],className:"flex items-center gap-2 px-3 py-2 bg-red-50 text-red-700 rounded-lg font-semibold hover:bg-red-100 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer text-sm",children:[l[s.product]?e.jsx("div",{className:"w-4 h-4 border-2 border-red-700 border-t-transparent rounded-full animate-spin"}):e.jsx(k,{className:"w-4 h-4"}),l[s.product]?"Unpublishing...":"Unpublish"]}),(t==="active"||t==="inactive")&&e.jsxs("button",{onClick:()=>N(s.product,t==="active"?"inactive":"active"),disabled:l[s.product],className:"flex items-center gap-2 px-3 py-2 bg-yellow-50 text-yellow-700 rounded-lg font-semibold hover:bg-yellow-100 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer text-sm",children:[l[s.product]?e.jsx("div",{className:"w-4 h-4 border-2 border-yellow-700 border-t-transparent rounded-full animate-spin"}):e.jsx(E,{className:"w-4 h-4"}),l[s.product]?"Updating...":t==="active"?"Deactivate":"Activate"]})]})})]},r)})})]})}),((U=g[t])==null?void 0:U.count)>0&&e.jsxs("div",{className:"px-6 py-4 flex flex-col sm:flex-row justify-between items-center gap-4 border-t border-gray-200/50 bg-gray-50/50",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold",children:(i-1)*c+1})," to"," ",e.jsx("span",{className:"font-semibold",children:Math.min(i*c,g[t].count)})," ","of ",e.jsx("span",{className:"font-semibold",children:g[t].count})," products"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(i-1),disabled:i===1,className:"px-4 py-2 bg-white border border-gray-300 rounded-xl font-semibold text-gray-700 hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:"Previous"}),e.jsx("button",{onClick:()=>_(i+1),disabled:i*c>=g[t].count,className:"px-4 py-2 bg-white border border-gray-300 rounded-xl font-semibold text-gray-700 hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:"Next"})]})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6 space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("button",{onClick:()=>j("/admin/products"),className:"w-full flex items-center gap-3 p-3 bg-green-50 rounded-xl border border-green-200 text-green-700 font-semibold hover:bg-green-100 transition-all duration-300 cursor-pointer",children:[e.jsx(ue,{className:"w-5 h-5"}),"View All Products"]})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status Guide"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Pending - Awaiting review"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Published - Live on platform"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active - Available for sale"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Inactive - Not available"})]})]})]})]})})]})]})})};export{be as default};
