import{c as ze,a as qe,r as o,bI as $e,bK as Ae,a1 as Te,a0 as Ee,a2 as Le,j as e,y as b}from"./index-oHO_bMXB.js";import{s as Be,a1 as Ue,a2 as ee,t as Re,x as Oe,a3 as Me,y as Ge,u as se,d as w,X as re,A as ae,c as Ke,a4 as Qe,k as P}from"./index-DCVWk_eg.js";const We=({role:_="vendor"})=>{var Y,H,Z;const{id:B}=ze(),S=qe(),[U,$]=o.useState(""),[I,R]=o.useState(""),[u,O]=o.useState("basic"),[F,M]=o.useState(""),{data:d,isLoading:te,isError:le}=$e(B),[ie,{isLoading:G}]=Ae(),{data:ne=[]}=Te(),{data:ce=[]}=Ee(),{data:K=[]}=Le(U,{skip:!U}),de=Array.isArray(K)?K:[],n=_==="admin",A=o.useCallback(s=>{const r=parseFloat(s.price)||0,a=parseFloat(s.discount_percentage||s.discount||0),t=parseFloat(s.gst_percentage)||0,l=r-r*a/100,i=l*t/100;return(l+i).toFixed(2)},[]),T=o.useCallback(s=>{const r=parseFloat(s.price)||0,a=parseFloat(s.discount_percentage)||0,t=parseFloat(s.gst_percentage)||0,l=r-r*a/100,i=l*t/100;return(l+i).toFixed(2)},[]),oe=[{value:"INR",label:"Indian Rupee (â‚¹)"},{value:"USD",label:"US Dollar ($)"}],me=[{value:"kg",label:"Kilograms (kg)"},{value:"g",label:"Grams (g)"},{value:"lb",label:"Pounds (lb)"},{value:"oz",label:"Ounces (oz)"}],ge=[{value:"physical",label:"Physical Product"},{value:"digital",label:"Digital Product"},{value:"service",label:"Service"},{value:"subscription",label:"Subscription"}],Q=Array.from({length:101},(s,r)=>({value:r.toString(),label:`${r}%`})),V=Array.from({length:41},(s,r)=>({value:r.toString(),label:`${r}% GST`})),[c,h]=o.useState({name:"",description:"",short_description:"",brand:"",category:"",subcategory:"",image:null,tags:[],currency:"INR",weight:"",weight_unit:"kg",dimensions:"",product_type:"physical",video_url:"",warranty:"",features:[]}),[m,k]=o.useState([{size:"",unit:"gram",price:"",quantity:"",discount_percentage:"0",gst_percentage:"0",final_price:"0.00",is_default:!1}]),[E,C]=o.useState(()=>[{sizeIndex:0,min_quantity:"",price:"",discount_percentage:"0",gst_percentage:"0",final_bulk_price:"0.00"}].map(s=>({...s,final_bulk_price:T(s)}))),[x,J]=o.useState([]),[y,W]=o.useState([]),[ue,xe]=o.useState([]),[f,z]=o.useState(null),[j,pe]=o.useState({sizes:!1,image:!1}),N=o.useCallback(s=>s.map(r=>({...r,final_bulk_price:T(r)})),[T]);o.useEffect(()=>{if(m.some(r=>{const a=parseFloat(r.final_price)||0,t=parseFloat(A(r))||0;return a!==t})){const r=m.map(a=>({...a,final_price:A(a)}));k(r)}},[m,A]),o.useEffect(()=>{if(d){const s=d.product_detail;if(h({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",short_description:(s==null?void 0:s.short_description)||"",brand:(s==null?void 0:s.brand)||"",category:(s==null?void 0:s.category)||"",subcategory:(s==null?void 0:s.subcategory)||"",tags:(s==null?void 0:s.tags)||[],currency:(s==null?void 0:s.currency)||"INR",weight:(s==null?void 0:s.weight)||"",weight_unit:(s==null?void 0:s.weight_unit)||"kg",dimensions:(s==null?void 0:s.dimensions)||"",product_type:(s==null?void 0:s.product_type)||"physical",video_url:(s==null?void 0:s.video_url)||"",warranty:(s==null?void 0:s.warranty)||"",features:(s==null?void 0:s.features)||[]}),$((s==null?void 0:s.category)||""),d.variants_detail&&d.variants_detail.length>0){const r=d.variants_detail.map(t=>{const l=t.product_variant_prices&&t.product_variant_prices.length>0?t.product_variant_prices[0]:{};let i="gram";const g=t.name||"";return g.includes("kg")||g.toLowerCase().includes("kilo")?i="kg":g.includes("ml")?i="ml":g.includes("l")||g.toLowerCase().includes("litre")?i="litre":(g.includes("pcs")||g.toLowerCase().includes("piece"))&&(i="pcs"),{id:t.id,size:t.name,unit:i,price:l.price||"0.00",quantity:"",discount_percentage:l.discount?l.discount.toString():"0",gst_percentage:l.gst_percentage?l.gst_percentage.toString():"0",final_price:l.actual_price||"0.00",is_default:t.is_default||!1}});k(r);const a=[];d.variants_detail.forEach((t,l)=>{var i;((i=t.bulk_prices)==null?void 0:i.length)>0&&t.bulk_prices.forEach(g=>{var D;a.push({id:g.id,sizeIndex:l,sizeId:t.id,min_quantity:((D=g.max_quantity)==null?void 0:D.toString())||"",price:g.price,discount_percentage:"0",gst_percentage:"0",final_bulk_price:g.price||"0.00"})})}),a.length>0&&C(N(a))}if(s!=null&&s.images){J(s.images);const r=s.images.find(a=>a.is_featured);r&&z(r.image)}}},[d,N]),o.useEffect(()=>{const s=m.length===0||m.some(a=>!a.size||!a.price||isNaN(a.price)||parseFloat(a.price)<=0),r=!f&&x.length===0&&!c.image;pe({sizes:s,image:r})},[m,f,x,c.image]);const p=s=>{const{name:r,value:a}=s.target;h(t=>({...t,[r]:a})),r==="category"&&($(a),h(t=>({...t,subcategory:""})))},be=s=>{const r=s.target.files[0];r&&(h(a=>({...a,image:r})),z(URL.createObjectURL(r)))},he=s=>{const r=Array.from(s.target.files);if(x.length+y.length+r.length>5){b.error("You can upload a maximum of 5 images");return}if(r.length>0){const t=r.map(l=>({file:l,preview:URL.createObjectURL(l)}));W(l=>[...l,...t])}},ye=s=>{xe(a=>[...a,s]),J(a=>a.filter(t=>t.id!==s));const r=x.find(a=>a.id===s);r!=null&&r.is_featured&&z(null)},fe=s=>{W(r=>r.filter((a,t)=>t!==s))},je=s=>{R(s.target.value)},Ne=s=>{s.key==="Enter"&&I.trim()&&(s.preventDefault(),c.tags.includes(I.trim())||h(r=>({...r,tags:[...r.tags,I.trim()]})),R(""))},ve=s=>{h(r=>({...r,tags:r.tags.filter((a,t)=>t!==s)}))},we=s=>{M(s.target.value)},_e=s=>{s.key==="Enter"&&F.trim()&&(s.preventDefault(),c.features.includes(F.trim())||h(r=>({...r,features:[...r.features,F.trim()]})),M(""))},ke=s=>{h(r=>({...r,features:r.features.filter((a,t)=>t!==s)}))},v=(s,r,a)=>{if(n&&(r==="price"||r==="discount_percentage"||r==="gst_percentage")){b.warning("Admins cannot modify product prices");return}k(t=>t.map((l,i)=>i===s?{...l,[r]:a}:l))},q=(s,r,a)=>{if(n&&(r==="price"||r==="discount_percentage"||r==="gst_percentage")){b.warning("Admins cannot modify bulk prices");return}C(t=>{const l=t.map((i,g)=>g===s?{...i,[r]:a}:i);return N(l)})},Ce=()=>{if(n){b.warning("Admins cannot add new product sizes");return}k(s=>[...s,{size:"",unit:"gram",price:"",quantity:"",discount_percentage:"0",gst_percentage:"0",final_price:"0.00",is_default:!1}])},Pe=s=>{if(n){b.warning("Admins cannot remove product sizes");return}if(m.length>1){const r=m[s];C(a=>{const t=a.map(l=>({...l,sizeIndex:l.sizeIndex>s?l.sizeIndex-1:l.sizeIndex})).filter(l=>l.sizeIndex!==s&&l.sizeId!==(r==null?void 0:r.id));return N(t)}),k(a=>a.filter((t,l)=>l!==s))}else b.warning("At least one size is required")},Se=s=>{var a;if(n){b.warning("Admins cannot add bulk pricing tiers");return}const r=(a=m[s])==null?void 0:a.id;C(t=>{const l={sizeIndex:s,sizeId:r,min_quantity:"",price:"",discount_percentage:"0",gst_percentage:"0",final_bulk_price:"0.00"};return N([...t,l])})},Ie=s=>{if(n){b.warning("Admins cannot remove bulk pricing tiers");return}C(r=>{const a=r.filter((t,l)=>l!==s);return N(a)})},Fe=async s=>{var a;if(s.preventDefault(),m.length===0){b.error("At least one product size is required");return}if(m.some(t=>!t.size||!t.price||isNaN(t.price)||parseFloat(t.price)<=0)){b.error("Please fill all required size fields (size name and price)");return}if(!f&&x.length===0&&!c.image){b.error("Main image is required");return}try{const t=new FormData;Object.entries(c).forEach(([l,i])=>{i!==null&&i!==""&&(l==="tags"||l==="features"?t.append(l,JSON.stringify(i)):t.append(l,i))}),t.append("sizes",JSON.stringify(m)),t.append("price_tiers",JSON.stringify(E)),ue.forEach(l=>{t.append("removed_images",l)}),c.image&&t.append("image",c.image),y.forEach(l=>{t.append("additional_images",l.file)}),await ie({id:B,data:t}).unwrap(),b.success("ðŸŽ‰ Product updated successfully!"),S(`/${_}/products`)}catch(t){b.error(((a=t.data)==null?void 0:a.message)||"Failed to update product"),console.error("Product update error:",t)}},L=!j.sizes&&!j.image&&c.name&&c.description&&c.short_description&&c.brand&&c.category,X=[{id:"basic",label:"Basic Info",icon:Re},{id:"categories",label:"Categories",icon:Oe},{id:"specs",label:"Specifications",icon:Me},{id:"pricing",label:"Pricing",icon:Ge},{id:"images",label:"Images",icon:se}];return te?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"loading loading-spinner text-primary loading-lg mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Loading product details..."})]})}):le?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Failed to load product"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please try again later"}),e.jsx("button",{onClick:()=>S(`/${_}/products`),className:"btn btn-primary cursor-pointer",children:"Back to Products"})]})}):e.jsx("div",{className:"min-h-screen ",children:e.jsxs("div",{className:"max-w-8xl mx-auto py-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>S(`/${_}/products`),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors cursor-pointer group",children:[e.jsx(Be,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"font-semibold",children:"Back to Products"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-2xl",children:e.jsx(Ue,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Edit Product"}),e.jsxs("p",{className:"text-blue-600  font-extrabold mt-2 text-lg",children:["Update product details",n?" (Price editing disabled for admin)":""]})]})]})]}),n&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-800",children:"Admin Mode"}),e.jsx("p",{className:"text-xs text-yellow-600",children:"Price editing disabled"})]})]})}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-gray-200/50",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${L?"bg-green-500":"bg-yellow-500"} animate-pulse`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700",children:L?"Ready to update":"Complete all required fields"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[m.length," size",m.length!==1?"s":""," â€¢ ",x.length+y.length," image",x.length+y.length!==1?"s":""]})]})]})})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-2 shadow-sm border border-gray-200/50",children:e.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:X.map(s=>{const r=s.icon;return e.jsxs("button",{onClick:()=>O(s.id),className:`flex items-center gap-2 px-4 py-3 rounded-xl font-semibold transition-all duration-300 whitespace-nowrap cursor-pointer ${u===s.id?"bg-primary text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(r,{className:"w-4 h-4"}),s.label]},s.id)})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{onSubmit:Fe,className:"space-y-6",children:[(u==="basic"||u==="all")&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-primary to-primary/70 rounded-full"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Basic Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300",value:c.name,onChange:p,placeholder:"Enter product name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Brand ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"brand",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer",value:c.brand,onChange:p,required:!0,children:[e.jsx("option",{value:"",children:"Select Brand"}),ce.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{name:"currency",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer",value:c.currency,onChange:p,required:!0,children:oe.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Product Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{name:"product_type",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer",value:c.product_type,onChange:p,required:!0,children:ge.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Short Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"short_description",rows:3,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 resize-none",value:c.short_description,onChange:p,placeholder:"Brief description of the product",required:!0,maxLength:450}),e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[c.short_description.length,"/450 characters"]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"description",rows:5,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 resize-none",value:c.description,onChange:p,placeholder:"Detailed product description",required:!0,maxLength:2e3}),e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[c.description.length,"/2000 characters"]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Product Tags"}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.tags.map((s,r)=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-full text-sm font-semibold bg-blue-100 text-blue-800 border border-blue-200",children:[s,e.jsx("button",{type:"button",onClick:()=>ve(r),className:"text-blue-400 hover:text-blue-600 transition-colors cursor-pointer",children:e.jsx(w,{className:"w-3 h-3"})})]},r)),e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx("input",{type:"text",value:I,onChange:je,onKeyDown:Ne,placeholder:"Type a tag and press Enter",className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Add tags to help customers find your product"})]})]})]}),(u==="categories"||u==="all")&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-green-500 to-green-400 rounded-full"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Categories"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"category",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer",value:c.category,onChange:s=>{p(s),$(s.target.value),h(r=>({...r,subcategory:""}))},required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),ne.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Subcategory"}),e.jsxs("select",{name:"subcategory",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer disabled:opacity-50",value:c.subcategory,onChange:p,disabled:!c.category,children:[e.jsx("option",{value:"",children:"Select Subcategory"}),de.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]})]}),(u==="specs"||u==="all")&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-purple-500 to-purple-400 rounded-full"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Product Specifications"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Weight"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"number",name:"weight",min:"0",step:"0.01",className:"flex-1 px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300",value:c.weight,onChange:p,placeholder:"Product weight"}),e.jsx("select",{name:"weight_unit",className:"w-32 px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer",value:c.weight_unit,onChange:p,children:me.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Dimensions"}),e.jsx("input",{type:"text",name:"dimensions",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300",value:c.dimensions,onChange:p,placeholder:"e.g., 10x5x2 cm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Warranty Information"}),e.jsx("input",{type:"text",name:"warranty",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300",value:c.warranty,onChange:p,placeholder:"e.g., 1 year manufacturer warranty"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Product Video URL"}),e.jsx("input",{type:"url",name:"video_url",className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300",value:c.video_url,onChange:p,placeholder:"https://youtube.com/embed/example"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Product Features"}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.features.map((s,r)=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-full text-sm font-semibold bg-green-100 text-green-800 border border-green-200",children:[s,e.jsx("button",{type:"button",onClick:()=>ke(r),className:"text-green-400 hover:text-green-600 transition-colors cursor-pointer",children:e.jsx(w,{className:"w-3 h-3"})})]},r)),e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx("input",{type:"text",value:F,onChange:we,onKeyDown:_e,placeholder:"Type a feature and press Enter",className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Add key features, hit Enter to add more"})]})]})]}),(u==="pricing"||u==="all")&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-orange-500 to-orange-400 rounded-full"}),e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Product Sizes & Pricing",n&&e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-2",children:"(View Only)"})]})]}),!n&&e.jsxs("button",{type:"button",onClick:Ce,className:"flex items-center gap-2 px-4 py-3 bg-primary text-white rounded-xl font-semibold hover:bg-primary/90 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-xl",children:[e.jsx(re,{className:"w-4 h-4"}),"Add Size"]})]}),j.sizes&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-3",children:[e.jsx(ae,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),e.jsx("p",{className:"text-red-700 font-semibold",children:m.length===0?"At least one product size is required":"Please fill all required size fields (size name and price)"})]}),e.jsx("div",{className:"space-y-6",children:m.map((s,r)=>e.jsxs("div",{className:"border-2 border-blue-200 rounded-2xl p-6 bg-gradient-to-br from-blue-50/50 to-indigo-50/30",children:[n&&e.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm font-semibold text-yellow-700",children:"Price editing disabled for admin"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Size (Variant) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"e.g., Medium, 500g, 1L",className:`w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 ${n?"bg-gray-100 cursor-not-allowed":""}`,value:s.size,onChange:a=>v(r,"size",a.target.value),required:!0,disabled:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:`w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer ${n?"bg-gray-100 cursor-not-allowed":""}`,value:s.unit,onChange:a=>v(r,"unit",a.target.value),required:!0,disabled:n,children:[e.jsx("option",{value:"gram",children:"Gram"}),e.jsx("option",{value:"kg",children:"Kilogram"}),e.jsx("option",{value:"ml",children:"ML"}),e.jsx("option",{value:"litre",children:"Litre"}),e.jsx("option",{value:"pcs",children:"Pieces"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Base Price (â‚¹) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0.01",step:"0.01",className:`w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 ${n?"bg-gray-100 cursor-not-allowed":""}`,value:s.price,onChange:a=>v(r,"price",a.target.value),placeholder:"0.00",required:!0,disabled:n})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Discount %"}),e.jsx("select",{className:`w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer ${n?"bg-gray-100 cursor-not-allowed":""}`,value:String(s.discount_percentage||s.discount||"0"),onChange:a=>v(r,"discount_percentage",a.target.value),disabled:n,children:Q.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"GST %"}),e.jsx("select",{className:`w-full px-4 py-3 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer ${n?"bg-gray-100 cursor-not-allowed":""}`,value:String(s.gst_percentage||"0"),onChange:a=>v(r,"gst_percentage",a.target.value),disabled:n,children:V.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Final Price (â‚¹)"}),e.jsxs("div",{className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl font-semibold text-gray-900",children:["â‚¹",s.final_price||"0.00"]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-3",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Bulk Pricing Tiers",n&&e.jsx("span",{className:"text-sm font-normal text-gray-500 ml-2",children:"(View Only)"})]}),!n&&e.jsxs("button",{type:"button",onClick:()=>Se(r),className:"flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg font-semibold hover:bg-blue-200 transition-all duration-300 cursor-pointer",children:[e.jsx(re,{className:"w-4 h-4"}),"Add Tier"]})]}),e.jsx("div",{className:"space-y-4",children:E.filter(a=>a.sizeIndex===r||a.sizeId===s.id).map((a,t)=>{const l=E.findIndex(i=>i.id&&a.id&&i.id===a.id||i.sizeIndex===a.sizeIndex&&i.min_quantity===a.min_quantity&&i.price===a.price);return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4 p-4 bg-white rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"space-y-2 lg:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Min Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"1",className:`w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 ${n?"bg-gray-100 cursor-not-allowed":""}`,value:a.min_quantity,onChange:i=>q(l,"min_quantity",i.target.value),required:!0,disabled:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Final Price (â‚¹) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0.01",step:"0.01",className:`w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 ${n?"bg-gray-100 cursor-not-allowed":""}`,value:a.price,onChange:i=>q(l,"price",i.target.value),required:!0,disabled:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Discount %"}),e.jsx("select",{className:`w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer ${n?"bg-gray-100 cursor-not-allowed":""}`,value:a.discount_percentage,onChange:i=>q(l,"discount_percentage",i.target.value),disabled:n,children:Q.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"GST %"}),e.jsx("select",{className:`w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-300 cursor-pointer ${n?"bg-gray-100 cursor-not-allowed":""}`,value:a.gst_percentage,onChange:i=>q(l,"gst_percentage",i.target.value),disabled:n,children:V.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Selling Price (â‚¹)"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg font-semibold text-gray-900 text-center",children:["â‚¹",a.final_bulk_price||"0.00"]})]}),e.jsx("div",{className:"lg:col-span-6 flex justify-end",children:!n&&e.jsxs("button",{type:"button",onClick:()=>Ie(l),className:"flex items-center justify-center gap-2 px-3 py-2 bg-red-100 text-red-700 rounded-lg font-semibold hover:bg-red-200 transition-all duration-300 cursor-pointer",children:[e.jsx(w,{className:"w-4 h-4"}),"Remove Tier"]})})]},a.id||`${a.sizeIndex}-${a.min_quantity}-${t}`)})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("label",{className:"flex items-center gap-3 text-sm font-semibold text-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.is_default,onChange:a=>v(r,"is_default",a.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer",disabled:n}),"Set as default size"]}),m.length>1&&!n&&e.jsxs("button",{type:"button",onClick:()=>Pe(r),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-all duration-300 cursor-pointer",children:[e.jsx(w,{className:"w-4 h-4"}),"Remove Size"]})]})]},s.id||r))})]}),(u==="images"||u==="all")&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-pink-500 to-pink-400 rounded-full"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Product Images"})]}),j.image&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-3",children:[e.jsx(ae,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),e.jsx("p",{className:"text-red-700 font-semibold",children:"Main image is required"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-lg font-semibold text-gray-700",children:["Main Image ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-6 hover:border-primary transition-all duration-300",children:f?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:f,alt:"Main product preview",className:"mx-auto h-48 object-contain rounded-xl shadow-lg"}),e.jsx("button",{type:"button",onClick:()=>{z(null),h(s=>({...s,image:null}))},className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-all duration-300 cursor-pointer",children:"Change Image"})]}):e.jsxs("label",{className:"cursor-pointer block",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Ke,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-lg font-semibold text-primary",children:"Click to upload"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"PNG, JPG, WEBP up to 10MB"})]})]}),e.jsx("input",{type:"file",accept:"image/*",className:"sr-only",onChange:be,required:!f&&x.length===0})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-700",children:"Additional Images"}),x.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Current Images:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:x.map(s=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s.image,alt:`Product ${s.id}`,className:"w-full h-24 object-cover rounded-lg border-2 border-gray-200 group-hover:border-primary transition-all duration-300"}),e.jsx("button",{type:"button",onClick:()=>ye(s.id),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 transition-all duration-300 cursor-pointer shadow-lg",children:e.jsx(w,{className:"w-3 h-3"})}),s.is_featured&&e.jsx("span",{className:"absolute -top-2 -left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-semibold",children:"Main"})]},s.id))})]}),y.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"New Images:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:y.map((s,r)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s.preview,alt:`New image ${r}`,className:"w-full h-24 object-cover rounded-lg border-2 border-green-200 group-hover:border-green-400 transition-all duration-300"}),e.jsx("button",{type:"button",onClick:()=>fe(r),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 transition-all duration-300 cursor-pointer shadow-lg",children:e.jsx(w,{className:"w-3 h-3"})})]},r))})]}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-6 hover:border-primary transition-all duration-300",children:e.jsxs("label",{className:`cursor-pointer block ${x.length+y.length>=5?"opacity-50":""}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx(se,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-lg font-semibold text-primary",children:"Add More Images"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[x.length+y.length,"/5 images selected"]})]})]}),e.jsx("input",{type:"file",multiple:!0,className:"sr-only",accept:"image/*",onChange:he,disabled:x.length+y.length>=5})]})})]})]})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>S(`/${_}/products`),className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300 cursor-pointer",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!L||G,className:"flex items-center justify-center gap-3 px-8 py-3 bg-gradient-to-r from-primary to-primary/90 text-white rounded-xl font-semibold hover:from-primary/90 hover:to-primary transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer shadow-lg hover:shadow-xl",children:G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating Product..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5"}),"Update Product"]})})]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6 space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:"Edit Progress"}),e.jsx("div",{className:"space-y-4",children:X.map(s=>e.jsxs("button",{onClick:()=>O(s.id),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all duration-300 cursor-pointer ${u===s.id?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${u===s.id?"bg-white":"bg-gray-400"}`}),e.jsx("span",{className:"font-semibold text-sm",children:s.label})]},s.id))})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:"Requirements"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`flex items-center gap-3 ${c.name?"text-green-600":"text-gray-400"}`,children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"Product Name"})]}),e.jsxs("div",{className:`flex items-center gap-3 ${c.brand?"text-green-600":"text-gray-400"}`,children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"Brand"})]}),e.jsxs("div",{className:`flex items-center gap-3 ${c.category?"text-green-600":"text-gray-400"}`,children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"Category"})]}),e.jsxs("div",{className:`flex items-center gap-3 ${j.sizes?"text-red-400":"text-green-600"}`,children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"Pricing & Sizes"})]}),e.jsxs("div",{className:`flex items-center gap-3 ${j.image?"text-red-400":"text-green-600"}`,children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"Main Image"})]})]})]}),n&&e.jsxs("div",{className:"bg-yellow-50/80 backdrop-blur-sm rounded-2xl p-6 border border-yellow-200",children:[e.jsx("h4",{className:"text-lg font-bold text-yellow-900 mb-3",children:"ðŸ”’ Admin Restrictions"}),e.jsxs("ul",{className:"space-y-2 text-sm text-yellow-800",children:[e.jsx("li",{children:"â€¢ Cannot modify product prices"}),e.jsx("li",{children:"â€¢ Cannot modify bulk pricing"}),e.jsx("li",{children:"â€¢ Cannot add/remove sizes"}),e.jsx("li",{children:"â€¢ Cannot add/remove price tiers"}),e.jsx("li",{children:"â€¢ Can update product information"})]})]}),e.jsxs("div",{className:"bg-blue-50/80 backdrop-blur-sm rounded-2xl p-6 border border-blue-200",children:[e.jsx("h4",{className:"text-lg font-bold text-blue-900 mb-3",children:"ðŸ“± Quick Preview"}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${((Y=d==null?void 0:d.product_detail)==null?void 0:Y.status)==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:((H=d==null?void 0:d.product_detail)==null?void 0:H.status_display)||"Draft"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"SKU:"}),e.jsx("span",{className:"font-mono",children:(Z=d==null?void 0:d.product_detail)==null?void 0:Z.sku})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Created:"}),e.jsx("span",{children:new Date(d==null?void 0:d.created_at).toLocaleDateString()})]})]})]})]})})]})]})})};export{We as default};
