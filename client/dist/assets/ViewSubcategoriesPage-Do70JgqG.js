import{bE as j,bF as N,bG as f,r as l,j as e}from"./index-oHO_bMXB.js";const v=()=>{const{data:s,isLoading:c}=j(),d=Array.isArray(s)?s:(s==null?void 0:s.results)??[],[m]=N(),[u]=f(),[n,x]=l.useState(""),[b,h]=l.useState(null),[r,o]=l.useState(""),i=d.filter(t=>t.name.toLowerCase().includes(n.toLowerCase())),g=async t=>{if(confirm("Are you sure you want to delete this subcategory?"))try{await u(t).unwrap()}catch(a){console.error(a),alert("Delete failed")}},p=t=>{h(t),o(t.name),document.getElementById("sub_edit_modal").showModal()},y=async()=>{try{await m({id:b.id,name:r}).unwrap(),document.getElementById("sub_edit_modal").close()}catch(t){console.error(t),alert("Update failed")}};return e.jsxs("div",{className:"py-6 max-w-8xl mx-auto mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 flex-col sm:flex-row gap-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"All Subcategories"}),e.jsx("input",{type:"text",placeholder:"Search subcategory",className:"input input-bordered w-full sm:w-80",value:n,onChange:t=>x(t.target.value)})]}),c?e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsx("span",{className:"loading loading-spinner text-error loading-lg"})}):i.length===0?e.jsx("div",{className:"text-gray-500 text-center mt-10",children:"No subcategories found."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:i.map(t=>{var a;return e.jsxs("div",{className:"p-4 bg-white shadow rounded-md flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-bold ",children:"Main Category :"})," ",((a=t.parent)==null?void 0:a.name)??"No parent"]})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{className:"btn btn-xs btn-outline btn-info",onClick:()=>p(t),children:"Edit"}),e.jsx("button",{className:"btn btn-xs btn-outline btn-error",onClick:()=>g(t.id),children:"Delete"})]})]},t.id)})}),e.jsx("dialog",{id:"sub_edit_modal",className:"modal",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Edit Subcategory"}),e.jsx("input",{type:"text",value:r,onChange:t=>o(t.target.value),className:"input input-bordered w-full mb-4"}),e.jsx("div",{className:"modal-action",children:e.jsxs("form",{method:"dialog",className:"flex gap-3",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:y,children:"Save"}),e.jsx("button",{className:"btn",children:"Cancel"})]})})]})})]})};export{v as default};
