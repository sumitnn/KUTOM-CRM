import{r,aw as we,ax as ke,j as e,R as Ce,y as S}from"./index-0HRytCPr.js";import{M as P}from"./ModalPortal-Boos_dt6.js";import{C as le,b,B as Fe,Q as Se,R as Pe,k as _,H as T,c as B,e as De,y as ne,N as de,z as ie,M as Me}from"./index--WZidvUd.js";import{f as c}from"./format-PgvnqH7J.js";import"./index-D-omREhy.js";import"./en-US-CEmq6YZe.js";const Ae=[{value:"",label:"All Status"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}],Re=[{value:"",label:"All Methods"},{value:"upi",label:"UPI"},{value:"bank",label:"Bank Transfer"}],oe={pending:"bg-yellow-100 text-yellow-800 border border-yellow-200",approved:"bg-green-100 text-green-800 border border-green-200",rejected:"bg-red-100 text-red-800 border border-red-200"},qe=()=>{var K,L,Y;const[g,D]=r.useState(1),[p,M]=r.useState(""),[A,W]=r.useState(""),[R,q]=r.useState(""),[m,E]=r.useState(null),[h,z]=r.useState(null),[a,j]=r.useState(null),[ce,f]=r.useState(!1),[x,y]=r.useState(null),[xe,N]=r.useState(!1),[me,v]=r.useState(!1),[w,k]=r.useState(""),[n,C]=r.useState(!1),[he,O]=r.useState(!1),[$,ue]=r.useState(null),[H,be]=r.useState(null),[I,F]=r.useState(""),[U,G]=r.useState(!1),{data:d,isLoading:ge,isError:pe}=we({page:g,search:p,status:A,payment_method:R,date_from:m?c(m,"yyyy-MM-dd"):null,date_to:h?c(h,"yyyy-MM-dd"):null}),[Q]=ke(),V=async(s,l,t="")=>{var u;C(!0);try{const i=t?{status:l,rejected_reason:t}:{status:l};l==="approved"&&I&&(i.transaction_id=I),await Q({id:s,data:i}).unwrap(),S.success("Updated Record Successfully"),F("")}catch(i){console.error("Failed to update status:",i),S.error(((u=i==null?void 0:i.data)==null?void 0:u.message)||"Failed to update withdrawal")}finally{C(!1),N(!1),v(!1),k("")}},je=async()=>{if(!a||!x)return;C(!0);const s=new FormData;s.append("screenshot",x),s.append("status","screenshot");try{await Q({id:a.id,data:s,headers:{"Content-Type":"multipart/form-data"}}).unwrap(),S.success("Updated Payment Screenshot Successfully"),f(!1),y(null),j(null)}catch(l){console.error("Failed to upload screenshot:",l),S.error("Failed invalid action")}finally{C(!1)}},X=s=>{s.preventDefault(),D(1)},fe=()=>{M(""),W(""),q(""),E(null),z(null),D(1),G(!1)},ye=s=>{ue(s),O(!0)},Ne=s=>{be(H===s?null:s)},ve=s=>{const{payment_method:l,payment_details:t}=s;return l==="upi"?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(de,{className:"h-3 w-3 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"UPI ID"}),e.jsx("div",{className:"text-lg font-bold text-gray-900 bg-green-50 px-3 py-2 rounded-xl border border-green-200",children:(t==null?void 0:t.upi_id)||"N/A"})]})]})}):l==="bank"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(ie,{className:"h-3 w-3 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Account Holder"}),e.jsx("div",{className:"text-lg font-bold text-gray-900 bg-blue-50 px-3 py-2 rounded-xl border border-blue-200",children:(t==null?void 0:t.account_holder_name)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Bank Name"}),e.jsx("div",{className:"text-base font-medium text-gray-900 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200",children:(t==null?void 0:t.bank_name)||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Account Number"}),e.jsx("div",{className:"text-base font-medium text-gray-900 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200 font-mono",children:(t==null?void 0:t.account_number)||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"IFSC Code"}),e.jsx("div",{className:"text-base font-medium text-gray-900 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200 font-mono",children:(t==null?void 0:t.ifsc_code)||"N/A"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Branch"}),e.jsx("div",{className:"text-base font-medium text-gray-900 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200",children:(t==null?void 0:t.branch_name)||"N/A"})]})]})]}):e.jsx("span",{className:"text-gray-500 text-sm",children:"No payment details available"})},J=s=>{const{payment_method:l,payment_details:t}=s;return l==="upi"?e.jsxs("div",{className:"bg-green-50 p-4 rounded-2xl border border-green-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(de,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"UPI Transfer Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Payment will be sent via UPI"})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl border border-green-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"UPI ID"}),e.jsx("div",{className:"text-xl font-bold text-gray-900 bg-green-50 px-4 py-3 rounded-lg border border-green-200",children:(t==null?void 0:t.upi_id)||"N/A"})]})})]}):l==="bank"?e.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl border border-blue-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(ie,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Bank Transfer Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Payment will be sent via Bank Transfer"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"Account Holder"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:(t==null?void 0:t.account_holder_name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"Bank Name"}),e.jsx("div",{className:"text-base font-medium text-gray-900",children:(t==null?void 0:t.bank_name)||"N/A"})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"Account Number"}),e.jsx("div",{className:"text-lg font-bold text-gray-900 font-mono",children:(t==null?void 0:t.account_number)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"IFSC Code"}),e.jsx("div",{className:"text-base font-medium text-gray-900 font-mono",children:(t==null?void 0:t.ifsc_code)||"N/A"})]})]})}),(t==null?void 0:t.branch_name)&&e.jsx("div",{className:"md:col-span-2 bg-white p-4 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:"Branch"}),e.jsx("div",{className:"text-base font-medium text-gray-900",children:t.branch_name})]})]})})]})]}):e.jsx("div",{className:"bg-yellow-50 p-4 rounded-2xl border border-yellow-200 mb-4",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-sm font-semibold text-yellow-700",children:"No payment details available"})})})};return e.jsx("div",{className:"min-h-screen py-4",children:e.jsxs("div",{className:"max-w-8xl mx-auto ",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Withdrawal Requests"}),e.jsx("p",{className:"text-gray-600 font-medium mt-2 text-lg",children:"Manage and review all withdrawal requests"})]})})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4",children:[e.jsx("div",{className:"relative flex-1 lg:max-w-md",children:e.jsxs("div",{className:"relative flex rounded-2xl shadow-sm bg-white border border-gray-200 hover:border-gray-300 transition-all duration-200",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(le,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-12 pr-4 py-3 border-0 bg-transparent focus:ring-0 text-gray-900 placeholder-gray-500 font-medium",placeholder:"Search by user, email, or ID...",value:p,onChange:s=>M(s.target.value),onKeyUp:s=>s.key==="Enter"&&X(s)}),p&&e.jsx("button",{onClick:()=>M(""),className:"absolute right-2 cursor-pointer top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(b,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>G(!U),className:"flex cursor-pointer items-center gap-2 px-4 py-3 bg-white border border-gray-200 text-gray-700 rounded-2xl hover:bg-gray-50 transition-all duration-200 font-semibold shadow-sm",children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),U?e.jsx(Se,{className:"h-4 w-4"}):e.jsx(Pe,{className:"h-4 w-4"})]}),e.jsxs("button",{onClick:X,className:"px-4 sm:px-6 py-3 cursor-pointer bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Search"})]})]})]}),U&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),e.jsx("select",{className:"w-full px-4 cursor-pointer py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",value:A,onChange:s=>W(s.target.value),children:Ae.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Payment Method"}),e.jsx("select",{className:"w-full px-4 cursor-pointer py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",value:R,onChange:s=>q(s.target.value),children:Re.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",className:"w-full cursor-pointer px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",value:m?c(m,"yyyy-MM-dd"):"",onChange:s=>E(s.target.value?new Date(s.target.value):null)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",className:"w-full px-4 cursor-pointer py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white",value:h?c(h,"yyyy-MM-dd"):"",onChange:s=>z(s.target.value?new Date(s.target.value):null)})]}),e.jsx("div",{className:"sm:col-span-2 lg:col-span-4 flex justify-end gap-3",children:e.jsx("button",{onClick:fe,className:"px-6 py-3 cursor-pointer bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-2xl font-semibold transition-all duration-200 hover:shadow-md",children:"Reset Filters"})})]})]}),ge?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"})}):pe?e.jsxs("div",{className:"p-6 bg-red-50 border border-red-200 text-red-700 rounded-3xl text-center",children:[e.jsx("p",{className:"font-semibold",children:"Error loading withdrawals"}),e.jsx("p",{className:"text-sm mt-1",children:"Please try again later"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Request"}),e.jsx("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:"User Details"}),e.jsx("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider hidden lg:table-cell",children:"Payment"}),e.jsx("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider hidden md:table-cell",children:"Status"}),e.jsx("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider hidden xl:table-cell",children:"Date"}),e.jsx("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider hidden xl:table-cell",children:"Transaction ID"}),e.jsx("th",{className:"px-4 sm:px-6 py-4 text-right text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:(K=d==null?void 0:d.results)==null?void 0:K.map((s,l)=>{var t,u,i,Z,ee,se,te,re,ae;return e.jsxs(Ce.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150 group cursor-pointer",onClick:()=>Ne(s.id),children:[e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:["#",s.id]}),e.jsx("div",{className:"lg:hidden text-xs text-gray-500 mt-1",children:s.payment_method_display}),e.jsx("div",{className:"md:hidden mt-1",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-4 font-bold rounded-full ${oe[s.status]}`,children:s.status})}),e.jsx("div",{className:"xl:hidden text-xs text-gray-500 mt-1",children:c(new Date(s.created_at),"MMM dd, yyyy")})]})})}),e.jsxs("td",{className:"px-4 sm:px-6 py-4",children:[e.jsx("div",{className:"text-sm font-bold text-gray-900",children:((t=s.user)==null?void 0:t.username)||((u=s.user)==null?void 0:u.email)||"Unknown"}),e.jsx("div",{className:"text-xs text-gray-500",children:(i=s.user)==null?void 0:i.email}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[((Z=s.user)==null?void 0:Z.vendor_id)&&e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:["Vendor : ",s.user.vendor_id]}),((ee=s.user)==null?void 0:ee.stockist_id)&&e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:["Stockist : ",s.user.stockist_id]}),((se=s.user)==null?void 0:se.reseller_id)&&e.jsxs("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:["Reseller : ",s.user.reseller_id]})]})]}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["₹",s.amount]})}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-bold hidden lg:table-cell",children:s.payment_method_display}),e.jsxs("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap hidden md:table-cell",children:[e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-bold rounded-full ${oe[s.status]}`,children:s.status}),s.status==="rejected"&&s.rejected_reason&&e.jsx("div",{className:"text-xs text-red-600 mt-1 max-w-xs truncate",children:s.rejected_reason})]}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-bold hidden xl:table-cell",children:c(new Date(s.created_at),"MMM dd, yyyy")}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-bold hidden xl:table-cell",children:s.transaction_id}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[s.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:o=>{o.stopPropagation(),j(s),N(!0)},disabled:n,className:"inline-flex cursor-pointer items-center gap-1 px-3 py-2 bg-green-50 hover:bg-green-100 text-green-700 rounded-xl font-semibold transition-all duration-200 hover:shadow-md text-xs",children:[e.jsx(_,{className:"h-3 w-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Approve"})]}),e.jsxs("button",{onClick:o=>{o.stopPropagation(),j(s),v(!0)},disabled:n,className:"inline-flex cursor-pointer items-center gap-1 px-3 py-2 bg-red-50 hover:bg-red-100 text-red-700 rounded-xl font-semibold transition-all duration-200 hover:shadow-md text-xs",children:[e.jsx(T,{className:"h-3 w-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Reject"})]})]}),e.jsxs("div",{className:"flex gap-1",children:[["approved","pending"].includes(s.status)&&e.jsxs("button",{onClick:o=>{o.stopPropagation(),j(s),f(!0)},disabled:n,className:"inline-flex cursor-pointer items-center gap-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-xl font-semibold transition-all duration-200 hover:shadow-md text-xs",children:[e.jsx(B,{className:"h-3 w-3"}),e.jsx("span",{className:"hidden sm:inline",children:s!=null&&s.screenshot?"Update":"Proof"})]}),s.screenshot&&e.jsxs("button",{onClick:o=>{o.stopPropagation(),ye(s.screenshot)},className:"inline-flex items-center gap-1 px-3 py-2 bg-purple-50 hover:bg-purple-100 text-purple-700 rounded-xl font-semibold transition-all duration-200 hover:shadow-md text-xs",children:[e.jsx(De,{className:"h-3 w-3"}),e.jsx("span",{className:"hidden sm:inline",children:"View"})]})]})]})})]}),H===s.id&&e.jsx("tr",{className:"bg-blue-50",children:e.jsx("td",{colSpan:"8",className:"px-4 sm:px-6 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-blue-200",children:[e.jsxs("h4",{className:"font-bold text-sm text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4 text-blue-600"}),"Payment Details"]}),ve(s)]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-blue-200",children:[e.jsx("h4",{className:"font-bold text-sm text-gray-700 mb-3",children:"Wallet Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Current Balance:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["₹",((te=s.wallet)==null?void 0:te.current_balance)||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Payout Balance:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["₹",((re=s.wallet)==null?void 0:re.payout_balance)||"0.00"]})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-blue-200",children:[e.jsx("h4",{className:"font-bold text-sm text-gray-700 mb-3",children:"Request Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Request ID:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["#",s.id]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Date:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:c(new Date(s.created_at),"MMM dd, yyyy HH:mm")})]}),s.approved_by&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Approved By:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:((ae=s.approved_by)==null?void 0:ae.username)||"N/A"})]})]})]})]})})})]},s.id)})})]})}),(!(d!=null&&d.results)||d.results.length===0)&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ne,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No withdrawal requests found"}),e.jsx("p",{className:"text-gray-500",children:p||A||R||m||h?"Try adjusting your filters":"No withdrawal requests available at the moment"})]})]}),(d==null?void 0:d.count)>0&&e.jsxs("div",{className:"mt-8 flex flex-col items-center",children:[e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:Array.from({length:Math.ceil(d.count/10)},(s,l)=>e.jsx("button",{onClick:()=>D(l+1),className:`px-3 sm:px-4 py-2 rounded-xl font-semibold transition-all duration-200 ${g===l+1?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow-sm border border-gray-200"}`,children:l+1},l+1))}),e.jsxs("p",{className:"mt-4 text-sm text-gray-600 text-center",children:["Showing ",(g-1)*10+1,"-",Math.min(g*10,d.count)," of ",d.count," withdrawals"]})]})]}),ce&&e.jsx(P,{children:e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-6 relative mx-4",children:[e.jsx("button",{onClick:()=>{f(!1),y(null)},className:"absolute cursor-pointer top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors z-10",children:e.jsx(b,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Upload Payment Proof"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Add payment confirmation screenshot"})]}),e.jsx("div",{className:"mt-6 space-y-4",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Withdrawal ID:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["#",a.id]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Amount:"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["₹",a.amount]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:"Upload Screenshot (PDF/Image)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-6 text-center hover:border-blue-400 transition-colors duration-200 relative",children:[e.jsx(B,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"}),e.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:s=>y(s.target.files[0]),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),x&&e.jsxs("p",{className:"text-sm text-green-600 mt-2 font-medium",children:["Selected: ",x.name]})]})]})}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{f(!1),y(null)},disabled:n,className:"px-6 py-3 cursor-pointer border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-all duration-200 font-semibold hover:shadow-md",children:"Cancel"}),e.jsx("button",{onClick:je,disabled:!x||n,className:`px-6 py-3 cursor-pointer text-white font-semibold rounded-xl transition-all duration-200 flex items-center justify-center gap-2 ${!x||n?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4"}),"Upload Proof"]})})]})]})})}),xe&&e.jsx(P,{children:e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full p-6 relative mx-4",children:[e.jsx("button",{onClick:()=>{N(!1),F("")},className:"absolute  cursor-pointer top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(b,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Confirm Approval"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Approve this withdrawal request"})]}),e.jsx("div",{className:"mt-6 space-y-6",children:a&&e.jsxs(e.Fragment,{children:[J(a),e.jsx("div",{className:"bg-green-50 p-4 rounded-2xl border border-green-200",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Withdrawal ID"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["#",a.id]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Amount"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["₹",a.amount]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"User"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:(L=a.user)==null?void 0:L.username})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Transaction ID (Optional)"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 bg-white",placeholder:"Enter transaction reference ID...",value:I,onChange:s=>F(s.target.value)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: Add transaction reference for tracking"})]})]})}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-end gap-3",children:[e.jsx("button",{onClick:()=>{N(!1),F("")},disabled:n,className:"px-6 py-3 cursor-pointer border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-all duration-200 font-semibold hover:shadow-md",children:"Cancel"}),e.jsx("button",{onClick:()=>V(a.id,"approved"),disabled:n,className:`px-6 py-3 cursor-pointer text-white font-semibold rounded-xl transition-all duration-200 flex items-center justify-center gap-2 ${n?"bg-green-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-4 w-4"}),"Confirm Approve"]})})]})]})})}),me&&e.jsx(P,{children:e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full p-6 relative mx-4",children:[e.jsx("button",{onClick:()=>{v(!1),k("")},className:"absolute cursor-pointer top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(b,{className:"h-6 w-6"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(T,{className:"h-8 w-8 text-red-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Reject Withdrawal"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Provide reason for rejection"})]}),e.jsx("div",{className:"mt-6 space-y-6",children:a&&e.jsxs(e.Fragment,{children:[J(a),e.jsx("div",{className:"bg-red-50 p-4 rounded-2xl border border-red-200",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Withdrawal ID"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["#",a.id]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Amount"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["₹",a.amount]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"User"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:(Y=a.user)==null?void 0:Y.username})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Reason for Rejection *"}),e.jsx("textarea",{rows:4,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 bg-white resize-none",value:w,onChange:s=>k(s.target.value),placeholder:"Enter detailed reason for rejecting this withdrawal request..."})]})]})}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-end gap-3",children:[e.jsx("button",{onClick:()=>{v(!1),k("")},disabled:n,className:"px-6 py-3  cursor-pointer border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-all duration-200 font-semibold hover:shadow-md",children:"Cancel"}),e.jsx("button",{onClick:()=>V(a.id,"rejected",w),disabled:!w||n,className:`px-6 py-3 cursor-pointer text-white font-semibold rounded-xl transition-all duration-200 flex items-center justify-center gap-2 ${!w||n?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4"}),"Confirm Reject"]})})]})]})})}),he&&e.jsx(P,{children:e.jsx("div",{className:"fixed inset-0 z-50 bg-black/75 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full mx-4",children:[e.jsxs("div",{className:"p-6 flex justify-between items-center border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Payment Screenshot"}),e.jsx("button",{onClick:()=>O(!1),className:"text-gray-500 cursor-pointer hover:text-gray-700 transition-colors",children:e.jsx(b,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-auto flex justify-center",children:$&&e.jsx("img",{src:$,alt:"Payment Screenshot",className:"max-w-full h-auto rounded-2xl border-2 border-gray-200 shadow-lg"})})]})})})]})})};export{qe as default};
