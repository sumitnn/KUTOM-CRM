import{c as D,u as E,Z as L,ae as I,r as o,j as s,L as P}from"./index-0HRytCPr.js";import{n as Z}from"./index--WZidvUd.js";/* empty css                      */const U=({role:u})=>{var f,v,w,_;const{id:k}=D();E(),L(e=>e.cart.items);const{data:a,error:$,isLoading:q}=I(k),[t,p]=o.useState(null),[h,F]=o.useState(1),[j,N]=o.useState(null),[g,A]=o.useState(!1),[y,B]=o.useState({x:50,y:50}),[d,x]=o.useState(null);o.useEffect(()=>{var e,r,i,l,n,m;if(a&&(N(((r=(e=a.images)==null?void 0:e.find(c=>c.is_featured))==null?void 0:r.image)||((l=(i=a.images)==null?void 0:i[0])==null?void 0:l.image)||"/placeholder.png"),(n=a.sizes)!=null&&n.length)){const c=a.sizes.find(T=>T.is_default)||a.sizes[0];p(c),((m=c==null?void 0:c.price_tiers)==null?void 0:m.length)>0&&x(c.price_tiers[0])}},[a]),o.useEffect(()=>{var e;if(((e=t==null?void 0:t.price_tiers)==null?void 0:e.length)>0){const i=[...t.price_tiers].sort((l,n)=>n.min_quantity-l.min_quantity).find(l=>h>=l.min_quantity);x(i||null)}else x(null)},[h,t]);const b=e=>{if(!e)return null;const r=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]{11})/,i=e.match(r);return i?`https://www.youtube.com/embed/${i[1]}`:null},C=e=>{const{left:r,top:i,width:l,height:n}=e.currentTarget.getBoundingClientRect(),m=(e.pageX-r)/l*100,c=(e.pageY-i)/n*100;B({x:m,y:c})},S=()=>d?d.price:(t==null?void 0:t.price)||(a==null?void 0:a.price)||0;return q?s.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:s.jsx("span",{className:"loading loading-lg loading-spinner text-primary"})}):$||!a?s.jsxs("div",{className:"text-center py-10",children:[s.jsx("h2",{className:"text-xl font-bold text-red-600",children:"Product not found"}),s.jsx(P,{to:`/${u}/my-stocks`,className:"btn btn-outline mt-4",children:"Back to Products"})]}):s.jsxs("div",{className:"max-w-7xl mx-auto  py-4",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(P,{to:`/${u}/my-stocks`,className:"inline-flex items-center text-primary hover:text-primary-focus font-medium",children:[s.jsx(Z,{className:"mr-1"})," Back to Products"]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12",children:[s.jsxs("div",{className:"sticky top-4",children:[s.jsx("div",{className:"relative w-full border bg-gray-100 overflow-hidden rounded-lg cursor-zoom-in",onClick:()=>A(!g),onMouseMove:g?C:null,children:s.jsx("img",{src:j,alt:a.name,className:`w-full h-96 object-contain duration-300 transition-transform ${g?"scale-150":"scale-100"}`,style:{transformOrigin:`${y.x}% ${y.y}%`}})}),s.jsx("div",{className:"flex mt-4 gap-2 overflow-x-auto pb-2",children:(f=a.images)==null?void 0:f.map(e=>s.jsx("img",{src:e.image,alt:"thumb",className:`w-16 h-16 object-cover border-2 rounded-md cursor-pointer transition ${j===e.image?"border-primary":"border-gray-300 hover:border-gray-400"}`,onClick:()=>N(e.image)},e.id))}),a.video_url&&b(a.video_url)&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-2",children:"Product Video"}),s.jsx("div",{className:"aspect-w-16 aspect-h-9",children:s.jsx("iframe",{src:b(a.video_url),className:"w-full h-64 rounded-lg border-0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Product video"})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border-b pb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a.name}),s.jsxs("p",{className:"text-gray-500 mt-1",children:["SKU: ",a.sku]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["₹",S()]}),d&&s.jsxs("span",{className:"ml-2 text-sm text-gray-500 line-through",children:["₹",t==null?void 0:t.price]}),d&&s.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Bulk discount applied (",d.min_quantity,"+ units)"]})]})]}),((v=a.sizes)==null?void 0:v.length)>0&&s.jsxs("div",{className:"border-b pb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Available Sizes"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.sizes.map(e=>s.jsxs("button",{onClick:()=>{var r;if(p(e),((r=e.price_tiers)==null?void 0:r.length)>0){const l=[...e.price_tiers].sort((n,m)=>m.min_quantity-n.min_quantity).find(n=>h>=n.min_quantity);x(l||null)}else x(null)},disabled:!e.is_active,className:`px-4 py-2 rounded-lg text-sm font-medium transition ${(t==null?void 0:t.id)===e.id?"bg-primary text-white border-primary":"border border-gray-300 hover:border-gray-400 bg-white"} ${e.is_active?"":"opacity-50 cursor-not-allowed"}`,children:[e.size," ",e.unit&&`(${e.unit})`," – ₹",e.price]},e.id))})]}),((w=t==null?void 0:t.price_tiers)==null?void 0:w.length)>0&&s.jsxs("div",{className:"border-b pb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Bulk Pricing"}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left pb-2 font-semibold",children:"Quantity"}),s.jsx("th",{className:"text-right pb-2 font-semibold",children:"Price"})]})}),s.jsx("tbody",{children:[...t.price_tiers].sort((e,r)=>e.min_quantity-r.min_quantity).map(e=>s.jsxs("tr",{className:`${(d==null?void 0:d.id)===e.id?"bg-blue-50 font-semibold":""}`,children:[s.jsxs("td",{className:"py-2",children:[e.min_quantity,"+ units"]}),s.jsxs("td",{className:"text-right",children:["₹",e.price]})]},e.id))})]})})]}),s.jsxs("div",{className:"border-b pb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Description"}),s.jsx("p",{className:"text-gray-700",children:a.description||"No description available."})]}),((_=a.features)==null?void 0:_.length)>0&&s.jsxs("div",{className:"border-b pb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Features"}),s.jsx("ul",{className:"space-y-2 text-gray-700",children:a.features.map((e,r)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"inline-block w-1 h-1 mt-2 mr-2 bg-gray-500 rounded-full"}),e]},r))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Details"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-32",children:"Brand:"}),s.jsx("span",{className:"text-gray-900",children:a.brand_name||"N/A"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-32",children:"Category:"}),s.jsx("span",{className:"text-gray-900",children:a.category_name||"N/A"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-32",children:"Subcategory:"}),s.jsx("span",{className:"text-gray-900",children:a.subcategory_name||"N/A"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-32",children:"Weight:"}),s.jsxs("span",{className:"text-gray-900",children:[a.weight," ",a.weight_unit]})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-32",children:"Dimensions:"}),s.jsx("span",{className:"text-gray-900",children:a.dimensions})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-32",children:"Shipping Info:"}),s.jsx("span",{className:"text-gray-900",children:a.shipping_info||"N/A"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-32",children:"Status:"}),s.jsx("span",{className:"text-gray-900 capitalize",children:a.status||"N/A"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-32",children:"Rating:"}),s.jsx("span",{className:"text-gray-900",children:a.rating?`${a.rating} ★`:"Not rated"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"text-gray-500 w-32",children:"Created:"}),s.jsx("span",{className:"text-gray-900",children:new Date(a.created_at).toLocaleString()})]})]})]})]})]})]})};export{U as default};
