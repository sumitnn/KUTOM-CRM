import{a as ie,r as p,bN as j,bO as ce,j as e,y as $}from"./index-oHO_bMXB.js";import{v as U,S as ne,h as q,r as y,e as N,a5 as w,t as oe,x as xe,w as he,_ as me}from"./index-DCVWk_eg.js";const be=({role:B})=>{var S,C,L;const k=ie(),[a,E]=p.useState("draft"),[d,P]=p.useState(1),[c]=p.useState(10),[G,V]=p.useState(0),[l,g]=p.useState({}),{data:n,isLoading:M,isFetching:K,refetch:O}=j({status:"draft",page:d,pageSize:c},{skip:a!=="draft"}),{data:o,isLoading:Q,isFetching:z,refetch:H}=j({status:"published",page:d,pageSize:c},{skip:a!=="published"}),{data:x,isLoading:J,isFetching:W,refetch:X}=j({status:"active",page:d,pageSize:c},{skip:a!=="active"}),{data:h,isLoading:Y,isFetching:Z,refetch:D}=j({status:"inactive",page:d,pageSize:c},{skip:a!=="inactive"}),[ee]=ce(),b=s=>s?s.map(t=>{var T,I,R;const r=t.product_detail||{},f=((R=(I=(T=t==null?void 0:t.variants_detail)==null?void 0:T[0])==null?void 0:I.product_variant_prices)==null?void 0:R[0])||{},te=f.price,re=f.discount,le=f.gst_percentage,de=f.actual_price;return{id:t.product||r.id,date:r.created_at||t.created_at,name:r.name,sku:r.sku,brand:r.brand_name,category:r.category_name,subcategory:r.subcategory_name,quantity:0,baseprice:parseFloat(te||0),actual_price:parseFloat(de||0),gst:parseFloat(le||r.price||0),discount:parseFloat(re||0),demandDate:r.updated_at||t.updated_at,status:r.status||t.status,isFeatured:t.is_featured||r.is_featured}}):[],i=(()=>{const s=n||o||x||h;return{draft:(s==null?void 0:s.total_draft)||0,published:(s==null?void 0:s.total_published)||0,active:(s==null?void 0:s.total_active)||0,inactive:(s==null?void 0:s.total_inactive)||0,total:(s==null?void 0:s.total_products)||0}})(),m={draft:{data:b(n==null?void 0:n.results),count:(n==null?void 0:n.current_status_count)||0},published:{data:b(o==null?void 0:o.results),count:(o==null?void 0:o.current_status_count)||0},active:{data:b(x==null?void 0:x.results),count:(x==null?void 0:x.current_status_count)||0},inactive:{data:b(h==null?void 0:h.results),count:(h==null?void 0:h.current_status_count)||0}},_=()=>{g(t=>({...t,refresh:!0})),(()=>{switch(a){case"draft":return O();case"published":return H();case"active":return X();case"inactive":return D();default:return Promise.resolve()}})().finally(()=>{g(t=>({...t,refresh:!1})),V(t=>t+1)})},v=async(s,t)=>{g(r=>({...r,[s]:!0}));try{if(!s||!t){console.error("Product ID and status are required");return}await ee({id:s,status:t}).unwrap(),$.success(`ðŸŽ‰ Product marked as ${t}`),_()}catch(r){console.error("Failed to update status:",r),$.error("Failed to update product status")}finally{g(r=>({...r,[s]:!1}))}},F=s=>{P(s)},se=s=>{k(`/vendor/products/${s}`)},A=a==="draft"&&M||a==="published"&&Q||a==="active"&&J||a==="inactive"&&Y,u=a==="draft"&&K||a==="published"&&z||a==="active"&&W||a==="inactive"&&Z,ae=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return e.jsx("div",{className:"min-h-screen  py-4 ",children:e.jsxs("div",{className:"max-w-8xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-2xl",children:e.jsx(U,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Product Requests"}),e.jsx("p",{className:"text-gray-600 mt-2 text-lg",children:"Manage product status and visibility"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-gray-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Products"})]}),e.jsxs("div",{className:"bg-yellow-50/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-yellow-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:i.draft}),e.jsx("div",{className:"text-sm text-yellow-600",children:"Draft"})]}),e.jsxs("div",{className:"bg-blue-50/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-blue-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:i.published}),e.jsx("div",{className:"text-sm text-blue-600",children:"Published"})]}),e.jsxs("div",{className:"bg-green-50/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-green-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:i.active}),e.jsx("div",{className:"text-sm text-green-600",children:"Active"})]}),e.jsxs("div",{className:"bg-red-50/80 backdrop-blur-sm rounded-2xl p-4 shadow-sm border border-red-200/50",children:[e.jsx("div",{className:"text-2xl font-bold text-red-700",children:i.inactive}),e.jsx("div",{className:"text-sm text-red-600",children:"Inactive"})]})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:e.jsxs("button",{onClick:_,disabled:l.refresh||u,className:"flex items-center justify-center gap-2 px-4 py-3 bg-white/80 backdrop-blur-sm border border-gray-300 rounded-2xl text-gray-700 font-semibold hover:bg-white transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer shadow-sm hover:shadow-md",children:[e.jsx(ne,{className:`w-4 h-4 ${l.refresh||u?"animate-spin":""}`}),l.refresh||u?"Refreshing...":"Refresh"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-2 shadow-sm border border-gray-200/50 mb-6",children:e.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:[{id:"draft",label:"Draft",icon:q,color:"yellow",count:i.draft},{id:"published",label:"Published",icon:y,color:"blue",count:i.published},{id:"active",label:"Active",icon:N,color:"green",count:i.active},{id:"inactive",label:"Inactive",icon:w,color:"red",count:i.inactive}].map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>{E(s.id),P(1)},className:`flex items-center gap-2 px-4 py-3 rounded-xl font-semibold transition-all duration-300 whitespace-nowrap cursor-pointer ${a===s.id?`bg-${s.color}-500 text-white shadow-lg`:"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(t,{className:"w-4 h-4"}),s.label,e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${a===s.id?"bg-white/20 text-white":`bg-${s.color}-100 text-${s.color}-700`}`,children:s.count})]},s.id)})})}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-sm border border-gray-200/50 overflow-hidden",children:[(A||u)&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"loading loading-spinner text-primary loading-lg mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]}),!A&&!u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200/50",children:[e.jsx("thead",{className:"bg-gray-50/80",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Product"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider hidden lg:table-cell",children:"Brand & Category"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider hidden md:table-cell",children:"Pricing"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200/50",children:((C=(S=m[a])==null?void 0:S.data)==null?void 0:C.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-20 w-20 text-gray-400 mb-4",children:a==="draft"?e.jsx(q,{className:"w-full h-full"}):a==="published"?e.jsx(y,{className:"w-full h-full"}):a==="active"?e.jsx(N,{className:"w-full h-full"}):e.jsx(w,{className:"w-full h-full"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:a==="draft"?"No draft products":a==="published"?"No published products":a==="active"?"No active products":"No inactive products"}),e.jsx("p",{className:"text-gray-600",children:a==="draft"?"Draft products will appear here":a==="published"?"Published products will appear here":a==="active"?"Active products will appear here":"Inactive products will appear here"})]})})}):m[a].data.map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors duration-200",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-primary/10 to-primary/5 rounded-lg flex items-center justify-center",children:e.jsx(oe,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 line-clamp-2",children:s.name||"N/A"}),e.jsx("div",{className:"text-xs text-gray-500 font-mono mt-1",children:s.sku||"N/A"}),e.jsx("div",{className:"flex items-center gap-1 mt-1 md:hidden",children:e.jsx("span",{className:"text-xs text-gray-600",children:s.brand||"N/A"})})]})]})}),e.jsx("td",{className:"px-4 py-4 hidden lg:table-cell",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.brand||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.category||"N/A"})]}),s.subcategory&&e.jsx("div",{className:"text-xs text-gray-500 ml-5",children:s.subcategory})]})}),e.jsx("td",{className:"px-4 py-4 hidden md:table-cell",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["Base Price â‚¹",s.baseprice]})}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3 text-green-500"}),e.jsxs("span",{className:"text-green-600",children:[s.discount,"% off"]})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:"text-blue-600",children:[s.gst,"% GST"]})})]}),e.jsxs("div",{className:"text-sm font-bold text-primary",children:["Total â‚¹",s.actual_price]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:ae(s.date)}),e.jsxs("div",{className:"text-xs text-gray-500 md:hidden",children:["â‚¹",s.actual_price]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("button",{onClick:()=>se(s.id),className:"flex items-center gap-2 px-3 py-2 bg-blue-50 text-blue-700 rounded-lg font-semibold hover:bg-blue-100 transition-all duration-300 cursor-pointer text-sm",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"View"})]}),a==="active"&&e.jsxs("button",{onClick:()=>v(s.id,"inactive"),disabled:l[s.id],className:"flex items-center gap-2 px-3 py-2 bg-red-50 text-red-700 rounded-lg font-semibold hover:bg-red-100 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer text-sm",children:[l[s.id]?e.jsx("div",{className:"w-4 h-4 border-2 border-red-700 border-t-transparent rounded-full animate-spin"}):e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:l[s.id]?"Updating...":"Inactive"})]}),a==="inactive"&&e.jsxs("button",{onClick:()=>v(s.id,"active"),disabled:l[s.id],className:"flex items-center gap-2 px-3 py-2 bg-green-50 text-green-700 rounded-lg font-semibold hover:bg-green-100 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer text-sm",children:[l[s.id]?e.jsx("div",{className:"w-4 h-4 border-2 border-green-700 border-t-transparent rounded-full animate-spin"}):e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:l[s.id]?"Updating...":"Active"})]}),a==="draft"&&B==="admin"&&e.jsxs("button",{onClick:()=>v(s.id,"published"),disabled:l[s.id],className:"flex items-center gap-2 px-3 py-2 bg-green-50 text-green-700 rounded-lg font-semibold hover:bg-green-100 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer text-sm",children:[l[s.id]?e.jsx("div",{className:"w-4 h-4 border-2 border-green-700 border-t-transparent rounded-full animate-spin"}):e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:l[s.id]?"Publishing...":"Publish"})]})]})})]},s.id))})]})}),((L=m[a])==null?void 0:L.count)>0&&e.jsxs("div",{className:"px-6 py-4 flex flex-col sm:flex-row justify-between items-center gap-4 border-t border-gray-200/50 bg-gray-50/50",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold",children:(d-1)*c+1})," to"," ",e.jsx("span",{className:"font-semibold",children:Math.min(d*c,m[a].count)})," ","of ",e.jsx("span",{className:"font-semibold",children:m[a].count})," products"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(d-1),disabled:d===1,className:"px-4 py-2 bg-white border border-gray-300 rounded-xl font-semibold text-gray-700 hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:"Previous"}),e.jsx("button",{onClick:()=>F(d+1),disabled:d*c>=m[a].count,className:"px-4 py-2 bg-white border border-gray-300 rounded-xl font-semibold text-gray-700 hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:"Next"})]})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6 space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("button",{onClick:()=>k("/vendor/products"),className:"w-full flex items-center gap-3 p-3 bg-blue-50 rounded-xl border border-blue-200 text-blue-700 font-semibold hover:bg-blue-100 transition-all duration-300 cursor-pointer",children:[e.jsx(U,{className:"w-5 h-5"}),"View All Products"]})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status Guide"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Draft - Under review"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Published - Approved"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active - Available for sale"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Inactive - Not available"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Price Summary"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Price:"}),e.jsx("span",{className:"font-semibold",children:"As listed"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Discount:"}),e.jsx("span",{className:"font-semibold text-green-600",children:"Applied"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"GST:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"Included"})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-semibold text-gray-900",children:[e.jsx("span",{children:"Final Price:"}),e.jsx("span",{children:"Shown"})]})})]})]})]})})]})]})},G)};export{be as default};
