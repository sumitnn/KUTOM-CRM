import{r as h,ce as M,aM as R,aN as _,j as e,cf as F}from"./index-0HRytCPr.js";const V=()=>{const[s,g]=h.useState({postal_code:"",state:"",district:""}),[j,b]=h.useState({}),[r,d]=h.useState(1),[x]=h.useState(10),{data:l,isLoading:N,isError:w,refetch:v}=M({...j,page:r,limit:x}),{data:k=[]}=R(),{data:C=[]}=_(s.state,{skip:!s.state}),p=(t,m)=>{g(a=>({...a,[t]:m,...t==="state"&&{district:""}}))},P=()=>{b({postal_code:s.postal_code.trim(),state:s.state,district:s.district}),d(1)},S=()=>{const t={postal_code:"",state:"",district:""};g(t),b(t),d(1)},y=()=>{v()},u=(l==null?void 0:l.results)||[],o=(l==null?void 0:l.count)||0,n=Math.ceil(o/x),A=()=>{const t=[];let a=Math.max(1,r-Math.floor(2.5)),i=Math.min(n,a+5-1);i-a+1<5&&(a=Math.max(1,i-5+1));for(let c=a;c<=i;c++)t.push(c);return t};return N?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(F,{size:"lg"})}):w?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load resellers"}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})}):e.jsx("div",{className:"min-h-screen  ",children:e.jsxs("div",{className:"max-w-8xl mx-auto py-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"My Network (Assigned Resellers)"}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:["Showing ",u.length," of ",o," resellers"]})]}),e.jsxs("button",{onClick:y,className:"flex items-center justify-center px-4 py-2 cursor-pointer bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 sm:self-start",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"xs:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsxs("select",{value:s.state,onChange:t=>p("state",t.target.value),className:"w-full p-2 cursor-pointer border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base",children:[e.jsx("option",{value:"",children:"All States"}),k.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"xs:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"District"}),e.jsxs("select",{value:s.district,onChange:t=>p("district",t.target.value),disabled:!s.state,className:"w-full p-2 cursor-pointer border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 text-sm sm:text-base",children:[e.jsx("option",{value:"",children:"All Districts"}),C.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"xs:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PIN Code"}),e.jsx("input",{type:"text",placeholder:"Enter PIN",value:s.postal_code,onChange:t=>p("postal_code",t.target.value.replace(/\D/g,"")),maxLength:6,className:"w-full cursor-pointer p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base"})]}),e.jsxs("div",{className:"xs:col-span-2 lg:col-span-1 flex flex-col sm:flex-row lg:flex-col xl:flex-row items-stretch sm:items-end gap-2",children:[e.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 border cursor-pointer border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Reset"}),e.jsx("button",{onClick:P,className:"flex-1 px-4 cursor-pointer py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700",children:"Search"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-[800px] lg:min-w-full",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Reseller ID"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Reseller Name"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Email"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Street Address"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"City"}),e.jsx("th",{className:"hidden md:table-cell px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"State"}),e.jsx("th",{className:"hidden lg:table-cell px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"District"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"PIN Code"}),e.jsx("th",{className:"hidden xl:table-cell px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Country"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.length>0?u.map((t,m)=>{var a,i,c,f;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm font-medium text-blue-600",children:t.rolebased_id||"N/A"}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:((a=t.user)==null?void 0:a.full_name)||((i=t.user)==null?void 0:i.username)||"N/A"}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"truncate block max-w-[120px] sm:max-w-none",children:((c=t.user)==null?void 0:c.email)||"N/A"})}),e.jsx("td",{className:"px-3 py-4 text-sm text-gray-500",children:e.jsx("span",{className:"truncate block max-w-[100px] sm:max-w-[150px]",children:t.street_address||"N/A"})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:t.city||"N/A"}),e.jsx("td",{className:"hidden md:table-cell px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:t.state||"N/A"}),e.jsx("td",{className:"hidden lg:table-cell px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:t.district||"N/A"}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:t.postal_code||"N/A"}),e.jsx("td",{className:"hidden xl:table-cell px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:t.country||"N/A"})]},((f=t.user)==null?void 0:f.id)||m)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-3 py-4 text-center text-sm text-gray-500",children:"No resellers found"})})})]})})}),n>1&&e.jsx("div",{className:"bg-white px-3 py-4 sm:px-4 sm:py-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"text-center sm:text-left",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(r-1)*x+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(r*x,o)})," of"," ",e.jsx("span",{className:"font-medium",children:o})," results"]})}),e.jsxs("div",{className:"flex flex-col xs:flex-row items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(t=>Math.max(t-1,1)),disabled:r===1,className:"relative inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"hidden sm:flex space-x-1",children:A().map(t=>e.jsx("button",{onClick:()=>d(t),className:`relative inline-flex items-center px-3 py-2 border text-sm font-medium ${r===t?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:t},t))}),e.jsx("button",{onClick:()=>d(t=>Math.min(t+1,n)),disabled:r===n,className:"relative inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsx("div",{className:"sm:hidden text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Page ",r," of ",n]})})]})]})})]}),e.jsx("div",{className:"lg:hidden mt-6",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Quick Tips"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Use horizontal scroll to view all table columns"}),e.jsx("li",{children:"• Some columns are hidden on smaller screens for better readability"}),e.jsx("li",{children:"• Use filters to narrow down your search results"})]})]})})]})})};export{V as default};
