const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-0HRytCPr.js","assets/index-DfS9FcIS.css","assets/ErrorMessage-D620Ebcm.js"])))=>i.map(i=>d[i]);
import{r,bm as Z,a0 as W,bn as ee,bo as te,j as e,_ as R,y as j}from"./index-0HRytCPr.js";import{C as $,b as y,X as M,u as ae,Y as B,Z as se,c as A,A as D,r as G}from"./index--WZidvUd.js";import{M as U}from"./ModalPortal-Boos_dt6.js";import"./index-D-omREhy.js";const re=r.lazy(()=>R(()=>import("./index-0HRytCPr.js").then(n=>n.cH),__vite__mapDeps([0,1]))),le=r.lazy(()=>R(()=>import("./ErrorMessage-D620Ebcm.js"),__vite__mapDeps([2,0,1]))),E=({src:n,alt:v,className:c})=>{const[p,x]=r.useState(!1),[b,i]=r.useState(!1);return e.jsxs("div",{className:`relative ${c}`,children:[!p&&!b&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 animate-pulse rounded-full"}),e.jsx("img",{src:b?"/placeholder-brand.png":n,alt:v,className:`${c} ${p?"opacity-100":"opacity-0"} transition-opacity duration-200 object-cover`,onLoad:()=>x(!0),onError:()=>{i(!0),x(!0)},loading:"lazy"})]})},ce=()=>{const[n,v]=r.useState(""),[c,p]=r.useState(""),[x,b]=r.useState(!1),{data:i}=Z(),{data:w=[],isLoading:O,isError:Q,refetch:g,isFetching:C}=W(c,{skip:x}),[T]=ee(),[J,{isLoading:_}]=te(),[N,L]=r.useState(!1),[s,o]=r.useState(null),[z,m]=r.useState(null),[V,f]=r.useState(!1),[l,h]=r.useState({name:"",description:"",is_active:!1,logoFile:null}),[k,d]=r.useState(""),q=t=>(i==null?void 0:i.role)==="admin"||(t==null?void 0:t.owner)===(i==null?void 0:i.id),X=t=>{console.log(t.size);const a=["image/jpeg","image/jpg","image/png"],u=600*1024;return a.includes(t.type)?t.size>u?"Image size must be less than 600kb":"":"Please select a valid image format (PNG or JPG only)"},P=()=>{const t=n.trim();if(t===c){g();return}b(!0),p(t),g().finally(()=>b(!1))},H=()=>{v(""),p(""),g()},K=async()=>{var t;if(s){L(!0);try{const a=new FormData;a.append("name",s.name),a.append("description",s.description||""),a.append("is_active",s.is_active?"true":"false"),s.logoFile&&a.append("logo",s.logoFile),await T({id:s.id,data:a}).unwrap(),L(!1),g(),j.success("Brand updated successfully"),o(null),m(null),d("")}catch(a){console.error("Update failed:",a),j.error(((t=a.data)==null?void 0:t.message)||"Failed to update brand")}}},Y=async()=>{var t;try{const a=new FormData;a.append("name",l.name),a.append("description",l.description||""),a.append("is_active",l.is_active?"true":"false"),l.logoFile&&a.append("logo",l.logoFile),await J(a).unwrap(),g(),j.success("Brand created successfully"),f(!1),h({name:"",description:"",is_active:!1,logoFile:null}),m(null),d("")}catch(a){console.error("Create failed:",a),j.error(((t=a.data)==null?void 0:t.message)||"Failed to create brand")}},I=(t,a=!1)=>{const u=t.target.files[0];if(!u)return;const S=X(u);if(S){d(S),j.error(S);return}d(""),a?h(F=>({...F,logoFile:u})):o(F=>({...F,logoFile:u})),m(URL.createObjectURL(u))};return O?e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:e.jsx(re,{})}):Q?e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading error message..."}),children:e.jsx(le,{onRetry:g})}):e.jsxs("div",{className:"min-h-screen  py-4 ",children:[e.jsxs("div",{className:"max-w-8xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold  bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Brand Management"}),e.jsxs("p",{className:"text-gray-600 font-medium mt-2 text-lg",children:[w.length," ",w.length===1?"brand":"brands"," found"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full lg:w-auto",children:[e.jsx("div",{className:"relative flex-1 lg:flex-initial",children:e.jsxs("div",{className:"relative flex rounded-2xl shadow-sm bg-white border border-gray-200 hover:border-gray-300 transition-all duration-200",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx($,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"searchbrand",name:"searchbrand",type:"text",placeholder:"Search brands...",className:"block w-full pl-12 pr-4 py-3 border-0 bg-transparent focus:ring-0 text-gray-900 placeholder-gray-500 font-medium",value:n,onChange:t=>v(t.target.value),onKeyUp:t=>t.key==="Enter"&&P()}),n&&e.jsx("button",{onClick:H,className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(y,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:P,disabled:C||x||!n.trim(),className:`px-6 py-3 cursor-pointer rounded-2xl font-semibold transition-all duration-200 flex items-center gap-2 ${C||x?"bg-gray-300 cursor-not-allowed":n.trim()?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5":"bg-gray-200 cursor-not-allowed text-gray-500"}`,children:[e.jsx($,{className:"h-4 w-4"}),C||x?"Searching...":"Search"]}),e.jsxs("button",{onClick:()=>f(!0),className:"px-6 py-3 bg-gradient-to-r cursor-pointer from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"New Brand"})]})]})]})]})}),w.length===0?e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-12 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-24 w-24 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl mb-6 shadow-inner",children:e.jsx(ae,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No brands found"}),e.jsx("p",{className:"text-gray-600 text-lg mb-6",children:c?"Try a different search term":"Get started by creating your first brand"}),!c&&e.jsxs("button",{onClick:()=>f(!0),className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-2xl font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 mx-auto",children:[e.jsx(M,{className:"h-5 w-5"}),"Create First Brand"]})]}):e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:"#"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Brand"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Logo"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider hidden lg:table-cell",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider hidden xl:table-cell",children:"Updated"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:w.map((t,a)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-bold text-gray-900 bg-gray-50 rounded-lg w-8 h-8 flex items-center justify-center",children:a+1})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:t.created_at})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-bold text-gray-900",children:t.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(E,{src:t.logo||"https://onno.spagreen.net/demo/public/default-image/default-1080x1000.png",alt:t.name,className:"h-12 w-12 rounded-xl object-cover border-2 border-white shadow-md"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden lg:table-cell",children:e.jsx("div",{className:"text-sm font-medium text-gray-700 max-w-xs truncate",children:t.description||"—"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold ${t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.is_active?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4 mr-1 fill-current"}),"Active"]}):"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden xl:table-cell",children:e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:t.updated_at})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("div",{className:"flex justify-end gap-2",children:q(t)&&e.jsxs("button",{onClick:()=>o({id:t.id,name:t.name,description:t.description||"",is_active:t.is_active,logo:t.logo}),className:"inline-flex cursor-pointer items-center gap-2 px-4 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-xl font-semibold transition-all duration-200 hover:shadow-md",title:"Edit",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit"})]})})})]},t.id))})]})})})]}),s&&e.jsx(U,{children:e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-6 relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>{o(null),m(null),d("")},className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors z-10",children:e.jsx(y,{className:"h-6 w-6 font-bold"})}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Edit Brand"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Update your brand information"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-4 mb-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(E,{src:z||s.logo||"https://onno.spagreen.net/demo/public/default-image/default-1080x1000.png",alt:"Brand Logo",className:"w-32 h-32 rounded-2xl border-4 border-white shadow-xl object-cover group-hover:shadow-2xl transition-all duration-300"}),e.jsxs("label",{className:"absolute -bottom-2 -right-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-3 rounded-full cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200 shadow-md",children:[e.jsx("input",{id:"logo",name:"file",type:"file",accept:".jpg,.jpeg,.png",onChange:I,className:"hidden"}),e.jsx(A,{className:"h-5 w-5"})]})]}),k&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm bg-red-50 px-3 py-2 rounded-xl",children:[e.jsx(D,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:k})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Supported formats: PNG, JPG • Max size: 600kb"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Brand Name *"}),e.jsx("input",{id:"brandname",name:"brandname",type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 focus:bg-white",value:s.name,onChange:t=>o(a=>({...a,name:t.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 focus:bg-white resize-none",rows:4,value:s.description,onChange:t=>o(a=>({...a,description:t.target.value})),placeholder:"Enter brand description..."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-2xl",children:[e.jsxs("label",{htmlFor:"isactive",className:"flex items-center cursor-pointer select-none",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 mr-3",children:"Active Status"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"isactive",type:"checkbox",className:"sr-only",checked:s.is_active,onChange:t=>o(a=>({...a,is_active:t.target.checked}))}),e.jsx("div",{className:`w-14 h-7 rounded-full transition-colors duration-300 ${s.is_active?"bg-green-500":"bg-gray-300"}`}),e.jsx("div",{className:`absolute top-0.5 left-0.5 w-6 h-6 bg-white rounded-full shadow-lg transform transition-transform duration-300 ${s.is_active?"translate-x-7":""}`})]})]}),s.is_active?e.jsx(B,{className:"h-6 w-6 text-green-500 fill-current"}):e.jsx(y,{className:"h-6 w-6 text-gray-400"})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{o(null),m(null),d("")},disabled:N,className:"px-6 py-3 border cursor-pointer border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-all duration-200 font-semibold hover:shadow-md",children:"Cancel"}),e.jsx("button",{onClick:K,disabled:N,className:`px-6 py-3 cursor-pointer text-white font-semibold rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 transition-all duration-200 flex items-center justify-center gap-2 ${N?"bg-green-400 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-5 w-5"}),"Update Brand"]})})]})]})})}),V&&e.jsx(U,{children:e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-6 relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>{f(!1),m(null),d(""),h({name:"",description:"",is_active:!1,logoFile:null})},className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 transition-colors z-10",children:e.jsx(y,{className:"h-6 w-6 font-bold"})}),e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-green-500 to-emerald-600 bg-clip-text text-transparent",children:"Create Brand"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Add a new brand to your collection"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-4 mb-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(E,{src:z||"https://onno.spagreen.net/demo/public/default-image/default-1080x1000.png",alt:"Brand Logo",className:"w-32 h-32 rounded-2xl border-4 border-white shadow-xl object-cover group-hover:shadow-2xl transition-all duration-300"}),e.jsxs("label",{className:"absolute -bottom-2 -right-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-3 rounded-full cursor-pointer hover:shadow-lg transform hover:scale-105 transition-all duration-200 shadow-md",children:[e.jsx("input",{id:"logo",name:"file",type:"file",accept:".jpg,.jpeg,.png",onChange:t=>I(t,!0),className:"hidden"}),e.jsx(A,{className:"h-5 w-5"})]})]}),k&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm bg-red-50 px-3 py-2 rounded-xl",children:[e.jsx(D,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:k})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Supported formats: PNG, JPG • Max size: 600kb"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Brand Name *"}),e.jsx("input",{id:"brandname",name:"brandname",type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 focus:bg-white",value:l.name,onChange:t=>h(a=>({...a,name:t.target.value})),placeholder:"Enter brand name...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 focus:bg-white resize-none",rows:4,value:l.description,onChange:t=>h(a=>({...a,description:t.target.value})),placeholder:"Enter brand description..."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-2xl",children:[e.jsxs("label",{htmlFor:"create-isactive",className:"flex items-center cursor-pointer",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 mr-3",children:"Active Status"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"create-isactive",type:"checkbox",className:"sr-only",checked:l.is_active,onChange:t=>h(a=>({...a,is_active:t.target.checked}))}),e.jsx("div",{className:`block w-14 h-7 rounded-full transition-colors duration-300 ${l.is_active?"bg-green-500":"bg-gray-300"}`}),e.jsx("div",{className:`absolute top-0.5 left-0.5 w-6 h-6 bg-white rounded-full shadow-lg transform transition-transform duration-300 ${l.is_active?"translate-x-7":""}`})]})]}),l.is_active?e.jsx(B,{className:"h-6 w-6 text-green-500 fill-current"}):e.jsx(y,{className:"h-6 w-6 text-gray-400"})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{f(!1),m(null),d(""),h({name:"",description:"",is_active:!1,logoFile:null})},className:"px-6 py-3 cursor-pointer border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-all duration-200 font-semibold hover:shadow-md",children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:_||!l.name,className:`px-6 py-3 cursor-pointer text-white font-semibold rounded-xl transition-all duration-200 flex items-center justify-center gap-2 ${_||!l.name?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-5 w-5"}),"Create Brand"]})})]})]})})})]})};export{ce as default};
